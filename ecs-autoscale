{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Metadata": {
    "AWS::CloudFormation::Designer": {
      "8d000bd4-c9e5-4ace-9c42-72e9c0814bbc": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 270,
          "y": 60
        },
        "z": 1,
        "embeds": []
      },
      "4756429f-fcc0-4f07-a7ce-830a9af798a7": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 60,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "bb51e9e0-3437-4142-aa64-8f3c0b031114": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 180,
          "y": 150
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "4756429f-fcc0-4f07-a7ce-830a9af798a7"
        ]
      },
      "59d63883-109d-4837-b0fd-51eeb6f68096": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 300,
          "y": 150
        },
        "z": 1,
        "embeds": []
      },
      "b466a13d-5623-4161-8480-bba292517e54": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 60,
          "y": 210
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "8d000bd4-c9e5-4ace-9c42-72e9c0814bbc",
          "66755691-55d7-41d0-9b13-e66a9db137cb"
        ],
        "isrelatedto": [
          "bb51e9e0-3437-4142-aa64-8f3c0b031114",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d"
        ]
      },
      "c5c66fd3-762b-4090-be9d-33c59fcc12f7": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 150,
          "y": 240
        },
        "z": 1,
        "embeds": []
      },
      "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 270,
          "y": 240
        },
        "z": 1,
        "embeds": []
      },
      "ce2f1ed7-e567-4800-b568-d2f6eaf95ca2": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 60,
          "y": 360
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "b466a13d-5623-4161-8480-bba292517e54"
        ]
      },
      "7bb5fc59-1c73-4f75-ac2d-54e5aaa695a2": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 180,
          "y": 360
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "ce2f1ed7-e567-4800-b568-d2f6eaf95ca2"
        ]
      },
      "c3c1b1e4-272d-430e-b72b-7648c8505110": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 300,
          "y": 360
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "7bb5fc59-1c73-4f75-ac2d-54e5aaa695a2",
          "ce2f1ed7-e567-4800-b568-d2f6eaf95ca2"
        ]
      },
      "f1d00681-03de-4f6e-8255-0e458c0e4478": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 390,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "ce2f1ed7-e567-4800-b568-d2f6eaf95ca2"
        ]
      },
      "999d2b64-7c22-40cd-992b-8a4c504bbcf1": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 390,
          "y": 210
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "f1d00681-03de-4f6e-8255-0e458c0e4478",
          "ce2f1ed7-e567-4800-b568-d2f6eaf95ca2"
        ]
      },
      "68254b0b-0d66-4cef-88cb-bfd102aa2637": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 480,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "8d000bd4-c9e5-4ace-9c42-72e9c0814bbc",
          "66755691-55d7-41d0-9b13-e66a9db137cb"
        ]
      },
      "c2d2cb22-9794-4115-a489-467acf21d1b9": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 480,
          "y": 180
        },
        "z": 1,
        "embeds": []
      },
      "84fdc607-a6bd-4aaf-9872-94da5a7b2e82": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 390,
          "y": 300
        },
        "z": 1,
        "embeds": [],
        "isconnectedto": [
          "68254b0b-0d66-4cef-88cb-bfd102aa2637"
        ],
        "isrelatedto": [
          "c2d2cb22-9794-4115-a489-467acf21d1b9"
        ]
      },
      "a77e3db9-abea-4bd5-bb02-1ad06d8d9eeb": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 600,
          "y": 240
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "59d63883-109d-4837-b0fd-51eeb6f68096"
        ],
        "references": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "c5c66fd3-762b-4090-be9d-33c59fcc12f7"
        ],
        "dependson": [
          "68254b0b-0d66-4cef-88cb-bfd102aa2637",
          "84fdc607-a6bd-4aaf-9872-94da5a7b2e82"
        ],
        "isrelatedto": [
          "c2d2cb22-9794-4115-a489-467acf21d1b9"
        ]
      },
      "2fd6884f-87a8-4cd5-a588-a93756613707": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 570,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "66755691-55d7-41d0-9b13-e66a9db137cb": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 570,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "308a3a84-a1aa-4c74-a12a-b0ba7af233c6": {
        "source": {
          "id": "66755691-55d7-41d0-9b13-e66a9db137cb"
        },
        "target": {
          "id": "8d000bd4-c9e5-4ace-9c42-72e9c0814bbc"
        },
        "z": 1
      },
      "28422931-e88b-430e-992c-03d7466e292d": {
        "source": {
          "id": "8d000bd4-c9e5-4ace-9c42-72e9c0814bbc"
        },
        "target": {
          "id": "66755691-55d7-41d0-9b13-e66a9db137cb"
        },
        "z": 1
      },
      "0c8bf122-d972-47ba-999f-705233488035": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 660,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "a77e3db9-abea-4bd5-bb02-1ad06d8d9eeb",
          "2fd6884f-87a8-4cd5-a588-a93756613707"
        ]
      },
      "d2320f3c-1c7b-4165-adb9-18cfa1f821ce": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 750,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "0c8bf122-d972-47ba-999f-705233488035"
        ]
      },
      "9bb61c45-86a1-4d4d-94cf-c657fe479e68": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 840,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "d2320f3c-1c7b-4165-adb9-18cfa1f821ce",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "a77e3db9-abea-4bd5-bb02-1ad06d8d9eeb"
        ]
      },
      "02952f13-1543-4009-96f5-6fa4cbd90bed": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 840,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "0c8bf122-d972-47ba-999f-705233488035"
        ]
      },
      "18ec07f9-23a2-494c-b8a6-3b2cdd07a550": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 690,
          "y": 180
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "02952f13-1543-4009-96f5-6fa4cbd90bed",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "a77e3db9-abea-4bd5-bb02-1ad06d8d9eeb"
        ]
      },
      "37dc69aa-3efe-434a-b01d-287b29e251aa": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 60,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "1cab38b8-b4ea-47d1-a30a-e8b90f982c17": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 180,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "715d5c36-5e9d-429a-a808-02eb5f35b34e": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 300,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "df8b69b9-87fc-42c2-a758-344326752d27": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 60,
          "y": 210
        },
        "z": 1,
        "embeds": []
      },
      "902fb76d-5c61-4bd3-b2a2-40d81681c1e2": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 60,
          "y": 330
        },
        "z": 1,
        "embeds": []
      },
      "bc1815e1-8554-4a9c-8f13-a3f7294b5bce": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 180,
          "y": 330
        },
        "z": 1,
        "embeds": []
      },
      "d26c1fee-fa3a-431f-bbe5-72febd80a21e": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 300,
          "y": 330
        },
        "z": 1,
        "embeds": []
      },
      "bff0e498-41da-485a-88da-4f4fa4b9718e": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 360,
          "y": 210
        },
        "z": 1,
        "embeds": []
      },
      "bd73c5a0-59d7-4ea6-bd86-b7abffc4f05c": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 60,
          "y": 450
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "bff0e498-41da-485a-88da-4f4fa4b9718e"
        ]
      },
      "afc41914-9504-4b0c-9803-53ce18f0d6dc": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 180,
          "y": 450
        },
        "z": 1,
        "embeds": []
      },
      "08ee8b98-14a9-411a-a19b-e4ffd0e52a54": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 300,
          "y": 450
        },
        "z": 1,
        "embeds": []
      },
      "f7d96f4d-b7b3-45c7-a5f0-c00f68ad094b": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 420,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ]
      },
      "e9a81617-9178-4a9f-9f7d-207e149072f1": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 480,
          "y": 210
        },
        "z": 1,
        "embeds": [],
        "isconnectedto": [
          "f7d96f4d-b7b3-45c7-a5f0-c00f68ad094b"
        ],
        "isrelatedto": [
          "37dc69aa-3efe-434a-b01d-287b29e251aa"
        ]
      },
      "71a5a67d-e8f6-43c1-b45b-bb479fc7b77b": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 420,
          "y": 330
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "afc41914-9504-4b0c-9803-53ce18f0d6dc"
        ],
        "references": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "1cab38b8-b4ea-47d1-a30a-e8b90f982c17",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ],
        "dependson": [
          "f7d96f4d-b7b3-45c7-a5f0-c00f68ad094b",
          "e9a81617-9178-4a9f-9f7d-207e149072f1"
        ],
        "isrelatedto": [
          "37dc69aa-3efe-434a-b01d-287b29e251aa"
        ]
      },
      "90358f0c-cc54-40c6-9428-0cd220d812e8": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 420,
          "y": 450
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "71a5a67d-e8f6-43c1-b45b-bb479fc7b77b",
          "902fb76d-5c61-4bd3-b2a2-40d81681c1e2",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "62aba032-8334-4ca8-98ee-64933d8b6a43": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 540,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "90358f0c-cc54-40c6-9428-0cd220d812e8"
        ]
      },
      "0c7f31f1-44b4-4de0-bdd2-f1d1f745356c": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 540,
          "y": 330
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "62aba032-8334-4ca8-98ee-64933d8b6a43",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "71a5a67d-e8f6-43c1-b45b-bb479fc7b77b",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "64de393a-14d9-494d-b30c-1c63230aaca6": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 540,
          "y": 450
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "90358f0c-cc54-40c6-9428-0cd220d812e8"
        ]
      },
      "99962573-bc90-4daa-8a72-68e983fe6cf1": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 60,
          "y": 570
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "64de393a-14d9-494d-b30c-1c63230aaca6",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "71a5a67d-e8f6-43c1-b45b-bb479fc7b77b",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "0a7b11c3-96a3-4101-8bad-a812a347d64c": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 180,
          "y": 570
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ]
      },
      "401475b2-32fe-4cd3-9d15-58f233f6b6e6": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 300,
          "y": 570
        },
        "z": 1,
        "embeds": [],
        "isconnectedto": [
          "0a7b11c3-96a3-4101-8bad-a812a347d64c"
        ],
        "isrelatedto": [
          "715d5c36-5e9d-429a-a808-02eb5f35b34e"
        ]
      },
      "bde57f82-3f46-403e-9fd5-3ac3130bb7f6": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 420,
          "y": 570
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "afc41914-9504-4b0c-9803-53ce18f0d6dc"
        ],
        "references": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "df8b69b9-87fc-42c2-a758-344326752d27",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ],
        "dependson": [
          "0a7b11c3-96a3-4101-8bad-a812a347d64c",
          "401475b2-32fe-4cd3-9d15-58f233f6b6e6"
        ],
        "isrelatedto": [
          "715d5c36-5e9d-429a-a808-02eb5f35b34e"
        ]
      },
      "af689f39-6268-42a2-8729-8c78dab75645": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 540,
          "y": 570
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "bde57f82-3f46-403e-9fd5-3ac3130bb7f6",
          "902fb76d-5c61-4bd3-b2a2-40d81681c1e2",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "7f6f66aa-d257-4472-aaa2-382dd9546705": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 660,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "af689f39-6268-42a2-8729-8c78dab75645"
        ]
      },
      "279367a3-4f7f-4714-b54e-f3d12139c375": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 600,
          "y": 210
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "7f6f66aa-d257-4472-aaa2-382dd9546705",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "bde57f82-3f46-403e-9fd5-3ac3130bb7f6",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "74ddac39-9bb8-41f5-9e25-8942c3ab1a7e": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 660,
          "y": 330
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "af689f39-6268-42a2-8729-8c78dab75645"
        ]
      },
      "866bbab6-79a8-402d-b067-b9b30ee431cb": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 660,
          "y": 450
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "74ddac39-9bb8-41f5-9e25-8942c3ab1a7e",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "bde57f82-3f46-403e-9fd5-3ac3130bb7f6",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "fc3ace3c-fa0f-433b-b977-c028fe7cdea0": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 660,
          "y": 570
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ]
      },
      "735f97a9-769d-4942-bec1-feea1c87aad8": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 60,
          "y": 690
        },
        "z": 1,
        "embeds": [],
        "isconnectedto": [
          "fc3ace3c-fa0f-433b-b977-c028fe7cdea0"
        ],
        "isrelatedto": [
          "bc1815e1-8554-4a9c-8f13-a3f7294b5bce"
        ]
      },
      "2e20c3ef-bdcc-4403-8ccd-e68b66b6dbe9": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 180,
          "y": 690
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "afc41914-9504-4b0c-9803-53ce18f0d6dc"
        ],
        "references": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "d26c1fee-fa3a-431f-bbe5-72febd80a21e",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ],
        "dependson": [
          "fc3ace3c-fa0f-433b-b977-c028fe7cdea0",
          "735f97a9-769d-4942-bec1-feea1c87aad8"
        ],
        "isrelatedto": [
          "bc1815e1-8554-4a9c-8f13-a3f7294b5bce"
        ]
      },
      "c7d7348d-1169-457b-bcdc-ee2be98c9b92": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 300,
          "y": 690
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "2e20c3ef-bdcc-4403-8ccd-e68b66b6dbe9",
          "902fb76d-5c61-4bd3-b2a2-40d81681c1e2",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "00495e64-be8b-48b4-a148-af1b19bd8f00": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 420,
          "y": 690
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "c7d7348d-1169-457b-bcdc-ee2be98c9b92"
        ]
      },
      "db584c00-0ebd-48d1-b769-45eac818bc57": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 540,
          "y": 690
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "00495e64-be8b-48b4-a148-af1b19bd8f00",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "2e20c3ef-bdcc-4403-8ccd-e68b66b6dbe9",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "55412ca8-74f8-4a65-980a-f05e91628633": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 660,
          "y": 690
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "c7d7348d-1169-457b-bcdc-ee2be98c9b92"
        ]
      },
      "92beec4c-e8ea-4354-8722-1c80a5da9f27": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 720,
          "y": 210
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "55412ca8-74f8-4a65-980a-f05e91628633",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "2e20c3ef-bdcc-4403-8ccd-e68b66b6dbe9",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "c8734a4d-44e9-4518-997c-7f9317f720bb": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 60,
          "y": 810
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ],
        "isrelatedto": [
          "bd73c5a0-59d7-4ea6-bd86-b7abffc4f05c",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "24e87d95-218f-4d62-b08c-78881e4af3ff": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 180,
          "y": 810
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "c8734a4d-44e9-4518-997c-7f9317f720bb"
        ]
      },
      "3e7c3783-aa83-46c2-aed3-68ff38e5e89e": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 300,
          "y": 810
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "24e87d95-218f-4d62-b08c-78881e4af3ff"
        ]
      },
      "b49a44f4-51b9-496f-9ef6-0e887c45422a": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 420,
          "y": 810
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "3e7c3783-aa83-46c2-aed3-68ff38e5e89e",
          "24e87d95-218f-4d62-b08c-78881e4af3ff",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "801b6a05-d510-42a1-b9ac-915bb2fa4ee8": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 540,
          "y": 810
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "24e87d95-218f-4d62-b08c-78881e4af3ff"
        ]
      },
      "65c3bf3e-65a3-46fe-a516-d53c38b5963a": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 660,
          "y": 810
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "801b6a05-d510-42a1-b9ac-915bb2fa4ee8",
          "24e87d95-218f-4d62-b08c-78881e4af3ff",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "7be9b3d0-21a0-4618-979d-cb87df42dacc": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 780,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "ebde2632-86df-4aad-a110-186d1cfd3bd4": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 840,
          "y": 210
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "7be9b3d0-21a0-4618-979d-cb87df42dacc",
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ],
        "isrelatedto": [
          "bd73c5a0-59d7-4ea6-bd86-b7abffc4f05c",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d"
        ]
      },
      "26789646-5a4e-464f-9c80-06cfd8abfc9b": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 780,
          "y": 330
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "ebde2632-86df-4aad-a110-186d1cfd3bd4"
        ]
      },
      "36f06beb-5ba3-4296-b1fb-27262d642e44": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 780,
          "y": 450
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "26789646-5a4e-464f-9c80-06cfd8abfc9b"
        ]
      },
      "158c87f3-2abe-456b-a4e7-6ce1f57fbdca": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 780,
          "y": 570
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "36f06beb-5ba3-4296-b1fb-27262d642e44",
          "26789646-5a4e-464f-9c80-06cfd8abfc9b",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d"
        ]
      },
      "8f740cd3-f49c-4c3b-bd19-e2fe4406cb3c": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 780,
          "y": 690
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "26789646-5a4e-464f-9c80-06cfd8abfc9b"
        ]
      },
      "46433b22-45dd-4696-a041-b2323eff25e0": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 780,
          "y": 810
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "8f740cd3-f49c-4c3b-bd19-e2fe4406cb3c",
          "26789646-5a4e-464f-9c80-06cfd8abfc9b",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d"
        ]
      },
      "aaeeb95c-b92e-4b2c-a5bd-7e939bc04ff9": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 870,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "5afc11f9-2486-4388-ae33-3e450b2e4798": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 990,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "94507ee7-314d-493c-a69a-fb6b391cbcbc": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1110,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ]
      },
      "0e1bb785-c6ea-418c-a0bd-e7b33cfac67e": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1230,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isconnectedto": [
          "94507ee7-314d-493c-a69a-fb6b391cbcbc"
        ],
        "isrelatedto": [
          "aaeeb95c-b92e-4b2c-a5bd-7e939bc04ff9"
        ]
      },
      "2f95f49a-385f-40c8-bec1-1e0e19e86974": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 150,
          "y": 180
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "afc41914-9504-4b0c-9803-53ce18f0d6dc"
        ],
        "references": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "5afc11f9-2486-4388-ae33-3e450b2e4798",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ],
        "dependson": [
          "94507ee7-314d-493c-a69a-fb6b391cbcbc",
          "0e1bb785-c6ea-418c-a0bd-e7b33cfac67e"
        ],
        "isrelatedto": [
          "aaeeb95c-b92e-4b2c-a5bd-7e939bc04ff9"
        ]
      },
      "6b90f25a-b5fb-4040-9837-057184861c0f": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 930,
          "y": 210
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "2f95f49a-385f-40c8-bec1-1e0e19e86974",
          "902fb76d-5c61-4bd3-b2a2-40d81681c1e2",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "a08ea95e-fe14-4289-9430-0b1d9b1865cc": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1050,
          "y": 210
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "6b90f25a-b5fb-4040-9837-057184861c0f"
        ]
      },
      "7018f656-fbd3-45f5-8b20-c34e42251813": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1170,
          "y": 210
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "a08ea95e-fe14-4289-9430-0b1d9b1865cc",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "2f95f49a-385f-40c8-bec1-1e0e19e86974",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "8ec18700-ac2e-4f8c-9bc6-389ba6fbcdcd": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 870,
          "y": 330
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "6b90f25a-b5fb-4040-9837-057184861c0f"
        ]
      },
      "317fab7d-edce-4581-87ff-01310fa2a5ab": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 990,
          "y": 330
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "8ec18700-ac2e-4f8c-9bc6-389ba6fbcdcd",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "2f95f49a-385f-40c8-bec1-1e0e19e86974",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "5d7a7629-f94f-466d-bc81-8fcd4411900b": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1320,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "5d29f90d-a39a-441b-9f4f-4108df03707b": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1440,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "ff6bb77e-0085-43f3-a8ee-b0cc0203826b": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1560,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ]
      },
      "99d94f70-c3aa-4fa8-9a48-7fb873326f35": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1680,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isconnectedto": [
          "ff6bb77e-0085-43f3-a8ee-b0cc0203826b"
        ],
        "isrelatedto": [
          "5d7a7629-f94f-466d-bc81-8fcd4411900b"
        ]
      },
      "60e38c98-adef-4ed4-aad6-b53999d49b5b": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1800,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "afc41914-9504-4b0c-9803-53ce18f0d6dc"
        ],
        "references": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "5d29f90d-a39a-441b-9f4f-4108df03707b",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ],
        "dependson": [
          "ff6bb77e-0085-43f3-a8ee-b0cc0203826b",
          "99d94f70-c3aa-4fa8-9a48-7fb873326f35"
        ],
        "isrelatedto": [
          "5d7a7629-f94f-466d-bc81-8fcd4411900b"
        ]
      },
      "88f43645-b841-437c-a43b-73eeb4c0b31d": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1920,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "60e38c98-adef-4ed4-aad6-b53999d49b5b",
          "902fb76d-5c61-4bd3-b2a2-40d81681c1e2",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "6165c4a1-1b5d-40a3-983e-038db0ed0362": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2040,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "88f43645-b841-437c-a43b-73eeb4c0b31d"
        ]
      },
      "ad2e1010-5ee1-4633-97fd-41394f83f826": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1260,
          "y": 210
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "6165c4a1-1b5d-40a3-983e-038db0ed0362",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "60e38c98-adef-4ed4-aad6-b53999d49b5b",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "9d0ccc48-5b93-431c-989f-18fdd1178df4": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1380,
          "y": 210
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "88f43645-b841-437c-a43b-73eeb4c0b31d"
        ]
      },
      "65b169c8-1f11-4d03-b635-0f0ee9f2e214": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1500,
          "y": 210
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "9d0ccc48-5b93-431c-989f-18fdd1178df4",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "60e38c98-adef-4ed4-aad6-b53999d49b5b",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        ]
      },
      "e22c5a63-24da-4923-aca1-bcaff94a5ec2": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2130,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "a6093232-3f4f-4d35-a36c-cb3507fc0636": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2250,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "25fdb4f6-d70b-45db-a1a6-b2b48bf64de0": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2370,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ]
      },
      "12b67f6d-f96a-4be2-8e88-7e036f66b71a": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2490,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isconnectedto": [
          "25fdb4f6-d70b-45db-a1a6-b2b48bf64de0"
        ],
        "isrelatedto": [
          "e22c5a63-24da-4923-aca1-bcaff94a5ec2"
        ]
      },
      "675cd568-f4f6-4660-ad27-e4ef02a4f424": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2610,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "afc41914-9504-4b0c-9803-53ce18f0d6dc"
        ],
        "references": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "a6093232-3f4f-4d35-a36c-cb3507fc0636",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32",
          "362a6f64-90c1-47b7-ba82-c009a8ce3f81"
        ],
        "dependson": [
          "25fdb4f6-d70b-45db-a1a6-b2b48bf64de0",
          "12b67f6d-f96a-4be2-8e88-7e036f66b71a"
        ],
        "isrelatedto": [
          "e22c5a63-24da-4923-aca1-bcaff94a5ec2"
        ]
      },
      "b01fe4f4-ee8b-454f-bbe5-b95d8954d687": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2730,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "675cd568-f4f6-4660-ad27-e4ef02a4f424",
          "902fb76d-5c61-4bd3-b2a2-40d81681c1e2",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32",
          "362a6f64-90c1-47b7-ba82-c009a8ce3f81"
        ]
      },
      "1b357773-1ae5-42bf-b3d2-10d61208bbb8": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2850,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "b01fe4f4-ee8b-454f-bbe5-b95d8954d687"
        ]
      },
      "187f9f7a-24e6-4a49-83d8-f2ab7f0e19a9": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2970,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "1b357773-1ae5-42bf-b3d2-10d61208bbb8",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "675cd568-f4f6-4660-ad27-e4ef02a4f424",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32",
          "362a6f64-90c1-47b7-ba82-c009a8ce3f81"
        ]
      },
      "f599b8d6-62ea-44e3-97fc-8d281a737bde": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1590,
          "y": 180
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "b01fe4f4-ee8b-454f-bbe5-b95d8954d687"
        ]
      },
      "b3737a38-a701-4837-80a8-bd8416c5cdf8": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1710,
          "y": 180
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "f599b8d6-62ea-44e3-97fc-8d281a737bde",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "675cd568-f4f6-4660-ad27-e4ef02a4f424",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32",
          "362a6f64-90c1-47b7-ba82-c009a8ce3f81"
        ]
      },
      "a36c0e8a-2a5b-4f01-8f24-7f87f9c54898": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 3060,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "cccab2c4-b16b-4604-980e-883f48ed8ec3": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 3180,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "5211a6c6-9aa7-4bc2-9171-ee8b82236ba3": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 3300,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ]
      },
      "f078d358-f4bb-4e63-b733-ee3692b0e7dc": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 3420,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isconnectedto": [
          "5211a6c6-9aa7-4bc2-9171-ee8b82236ba3"
        ],
        "isrelatedto": [
          "a36c0e8a-2a5b-4f01-8f24-7f87f9c54898"
        ]
      },
      "5a5555ad-7a44-4fb6-a633-b006b6ee7706": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 3540,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "afc41914-9504-4b0c-9803-53ce18f0d6dc"
        ],
        "references": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "cccab2c4-b16b-4604-980e-883f48ed8ec3",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32",
          "a5886500-240b-4d80-b2c9-478de6a84c1c"
        ],
        "dependson": [
          "5211a6c6-9aa7-4bc2-9171-ee8b82236ba3",
          "f078d358-f4bb-4e63-b733-ee3692b0e7dc"
        ],
        "isrelatedto": [
          "a36c0e8a-2a5b-4f01-8f24-7f87f9c54898"
        ]
      },
      "fc83c402-44c6-4c47-8372-068ee26f3e24": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 3660,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "5a5555ad-7a44-4fb6-a633-b006b6ee7706",
          "902fb76d-5c61-4bd3-b2a2-40d81681c1e2",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32",
          "a5886500-240b-4d80-b2c9-478de6a84c1c"
        ]
      },
      "2bd35f18-59e4-4a25-b0d2-b00c574d3825": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 3780,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "fc83c402-44c6-4c47-8372-068ee26f3e24"
        ]
      },
      "9568b899-a1c7-42be-a790-e6361ad43b8b": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 3900,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "2bd35f18-59e4-4a25-b0d2-b00c574d3825",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "5a5555ad-7a44-4fb6-a633-b006b6ee7706",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32",
          "362a6f64-90c1-47b7-ba82-c009a8ce3f81",
          "a5886500-240b-4d80-b2c9-478de6a84c1c"
        ]
      },
      "9a1098f2-5b5c-4742-9de4-47e33a55dc1c": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 4020,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "fc83c402-44c6-4c47-8372-068ee26f3e24"
        ]
      },
      "9989f5a2-49d6-4ada-b118-55bc74141efb": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 4140,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "9a1098f2-5b5c-4742-9de4-47e33a55dc1c",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "5a5555ad-7a44-4fb6-a633-b006b6ee7706",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32",
          "362a6f64-90c1-47b7-ba82-c009a8ce3f81",
          "a5886500-240b-4d80-b2c9-478de6a84c1c"
        ]
      },
      "fc9af27f-8288-4203-9fdc-aa96c6e94c31": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 4230,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "50bb0f32-c043-407a-bfaf-cc92ac91df73": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 4350,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "424bf577-21d0-4bc7-9117-1a4fe7f57a89": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 4470,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ]
      },
      "656a59c1-9fa7-4c11-8d27-038994cbec43": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 4590,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isconnectedto": [
          "424bf577-21d0-4bc7-9117-1a4fe7f57a89"
        ],
        "isrelatedto": [
          "fc9af27f-8288-4203-9fdc-aa96c6e94c31"
        ]
      },
      "0ef4610c-fd5e-4988-9fa0-33ebe9d379c1": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 4710,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "afc41914-9504-4b0c-9803-53ce18f0d6dc"
        ],
        "references": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "50bb0f32-c043-407a-bfaf-cc92ac91df73",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32",
          "fe7c9350-e0bd-4c94-9a49-72ef05e4351d"
        ],
        "dependson": [
          "424bf577-21d0-4bc7-9117-1a4fe7f57a89",
          "656a59c1-9fa7-4c11-8d27-038994cbec43"
        ],
        "isrelatedto": [
          "fc9af27f-8288-4203-9fdc-aa96c6e94c31"
        ]
      },
      "f491f70e-9e57-4b49-8a61-c30fd2ae266d": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 4830,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "0ef4610c-fd5e-4988-9fa0-33ebe9d379c1",
          "902fb76d-5c61-4bd3-b2a2-40d81681c1e2",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32",
          "fe7c9350-e0bd-4c94-9a49-72ef05e4351d"
        ]
      },
      "c1705f78-2652-4a9c-a957-5b2c7e5e3b58": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 4950,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "f491f70e-9e57-4b49-8a61-c30fd2ae266d"
        ]
      },
      "70262a95-da96-4014-8a92-d6df6d4c86e4": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 5070,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "c1705f78-2652-4a9c-a957-5b2c7e5e3b58",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "0ef4610c-fd5e-4988-9fa0-33ebe9d379c1",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32",
          "fe7c9350-e0bd-4c94-9a49-72ef05e4351d"
        ]
      },
      "f9cd3d62-f162-4ea7-a9e6-c429c60cbf63": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 5190,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "f491f70e-9e57-4b49-8a61-c30fd2ae266d"
        ]
      },
      "302970ad-bf34-4fe4-bd6f-2653734773bb": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 5310,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "f9cd3d62-f162-4ea7-a9e6-c429c60cbf63",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "0ef4610c-fd5e-4988-9fa0-33ebe9d379c1",
          "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32",
          "fe7c9350-e0bd-4c94-9a49-72ef05e4351d"
        ]
      },
      "d9f33846-c242-41cf-8b37-8b16b8093a89": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 5400,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "07e55bdb-1898-4751-86cb-e50be4034d7d": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 5520,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "245e4e12-39e5-446a-a5b3-7ac96f0b042f": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 5640,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "7be9b3d0-21a0-4618-979d-cb87df42dacc"
        ]
      },
      "845caa9e-af9d-4ddb-b218-555693619731": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 5760,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isconnectedto": [
          "245e4e12-39e5-446a-a5b3-7ac96f0b042f"
        ],
        "isrelatedto": [
          "d9f33846-c242-41cf-8b37-8b16b8093a89"
        ]
      },
      "0bae22b4-47d8-45a2-a526-290640d98b3f": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 5880,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "afc41914-9504-4b0c-9803-53ce18f0d6dc"
        ],
        "references": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "07e55bdb-1898-4751-86cb-e50be4034d7d"
        ],
        "dependson": [
          "245e4e12-39e5-446a-a5b3-7ac96f0b042f",
          "845caa9e-af9d-4ddb-b218-555693619731"
        ],
        "isrelatedto": [
          "d9f33846-c242-41cf-8b37-8b16b8093a89"
        ]
      },
      "cf216e16-c4a0-42e2-86ee-39721b6b5553": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 6000,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "0bae22b4-47d8-45a2-a526-290640d98b3f",
          "902fb76d-5c61-4bd3-b2a2-40d81681c1e2"
        ]
      },
      "05f851da-3eb2-4a24-9625-a9d1b52c179c": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 6120,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "cf216e16-c4a0-42e2-86ee-39721b6b5553"
        ]
      },
      "0365f26c-cf4f-425a-84d0-3dae068cb81a": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 6240,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "05f851da-3eb2-4a24-9625-a9d1b52c179c",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "0bae22b4-47d8-45a2-a526-290640d98b3f"
        ]
      },
      "458c8c4c-c0e6-437a-b767-af972afa81b5": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 6360,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "cf216e16-c4a0-42e2-86ee-39721b6b5553"
        ]
      },
      "dd0ceb9d-5ff3-4f03-b409-9bc98e5aab1d": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 6480,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "458c8c4c-c0e6-437a-b767-af972afa81b5",
          "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d",
          "0bae22b4-47d8-45a2-a526-290640d98b3f"
        ]
      },
      "8b5c1319-4770-41d0-9c75-8a8532073b06": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 6570,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "fe7c9350-e0bd-4c94-9a49-72ef05e4351d": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 6690,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "362a6f64-90c1-47b7-ba82-c009a8ce3f81": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 6810,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "f55c1352-16ce-4735-bc23-613be6aff4ab": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 6930,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "55f578cd-9e8d-40e0-9e4c-7bea3336425c": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 7050,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "a5886500-240b-4d80-b2c9-478de6a84c1c": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 7170,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 7290,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "4d2ad65c-fb21-44a1-8715-733926e364d2": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 6900,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ],
        "isrelatedto": [
          "bd73c5a0-59d7-4ea6-bd86-b7abffc4f05c",
          "8b5c1319-4770-41d0-9c75-8a8532073b06"
        ]
      },
      "64ed7431-3630-429a-9a70-096685bee822": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 7020,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "4d2ad65c-fb21-44a1-8715-733926e364d2"
        ]
      },
      "56830cfb-8602-43c3-8e11-3710679b93ad": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 7380,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ],
        "isrelatedto": [
          "bd73c5a0-59d7-4ea6-bd86-b7abffc4f05c",
          "fe7c9350-e0bd-4c94-9a49-72ef05e4351d"
        ]
      },
      "fffb2e72-8736-476f-bef5-befe59537214": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 7500,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "56830cfb-8602-43c3-8e11-3710679b93ad"
        ]
      },
      "c78c9a58-4213-4a7b-80f2-cae1f37d8e4d": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 7620,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ],
        "isrelatedto": [
          "bd73c5a0-59d7-4ea6-bd86-b7abffc4f05c",
          "362a6f64-90c1-47b7-ba82-c009a8ce3f81"
        ]
      },
      "b5c8a0d3-5d07-4712-afc5-d98fbbd181b7": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 7740,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "c78c9a58-4213-4a7b-80f2-cae1f37d8e4d"
        ]
      },
      "79b340d7-5225-47f9-9d54-bb6b68c2c8db": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 7860,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "b5c8a0d3-5d07-4712-afc5-d98fbbd181b7"
        ]
      },
      "1e368aab-59f3-4669-a9e8-b59d557f5cd3": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 7980,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "b5c8a0d3-5d07-4712-afc5-d98fbbd181b7"
        ]
      },
      "ecd35d3a-60b5-4967-ad73-72efd1df3266": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 8100,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ],
        "isrelatedto": [
          "bd73c5a0-59d7-4ea6-bd86-b7abffc4f05c",
          "a5886500-240b-4d80-b2c9-478de6a84c1c"
        ]
      },
      "612b9028-dec5-4b64-add3-a43edf5d1a0a": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 8220,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "ecd35d3a-60b5-4967-ad73-72efd1df3266"
        ]
      },
      "981e972f-f383-4f50-8345-a2159eea54f1": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 8340,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "612b9028-dec5-4b64-add3-a43edf5d1a0a"
        ]
      },
      "a0307688-e8e6-42a9-90fe-9605f8f6bfb2": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 8460,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "612b9028-dec5-4b64-add3-a43edf5d1a0a"
        ]
      },
      "0c04605a-ec55-4de3-bb8d-69bacaef862b": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 8580,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "3e7c3783-aa83-46c2-aed3-68ff38e5e89e",
          "8b5c1319-4770-41d0-9c75-8a8532073b06",
          "05b0f9f4-46ac-4e0e-9830-2429eecb6036",
          "2699d875-257d-4a53-8eb3-5fe697d8874b"
        ]
      },
      "3dfceb1d-56cd-491b-9a34-0490a7aa3019": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 8700,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "3e7c3783-aa83-46c2-aed3-68ff38e5e89e",
          "fe7c9350-e0bd-4c94-9a49-72ef05e4351d",
          "05b0f9f4-46ac-4e0e-9830-2429eecb6036"
        ]
      },
      "0842f621-8ab2-4ca1-9dc2-79cebbc9cd40": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 8820,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "3e7c3783-aa83-46c2-aed3-68ff38e5e89e",
          "362a6f64-90c1-47b7-ba82-c009a8ce3f81",
          "79b340d7-5225-47f9-9d54-bb6b68c2c8db"
        ]
      },
      "629f8a30-1191-4b16-a04c-a1f27599d0c3": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 8940,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "3e7c3783-aa83-46c2-aed3-68ff38e5e89e",
          "a5886500-240b-4d80-b2c9-478de6a84c1c",
          "981e972f-f383-4f50-8345-a2159eea54f1"
        ]
      },
      "eec3cc40-1b60-46a3-b765-12356e7f3023": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 9060,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "801b6a05-d510-42a1-b9ac-915bb2fa4ee8",
          "8b5c1319-4770-41d0-9c75-8a8532073b06",
          "d269d58e-183b-45b5-9486-4d3a30a95839"
        ]
      },
      "9c8ad95f-7dcf-4bed-879c-8f65a2bd7db0": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 9180,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "801b6a05-d510-42a1-b9ac-915bb2fa4ee8",
          "fe7c9350-e0bd-4c94-9a49-72ef05e4351d",
          "758ce8df-24a1-4a8f-813d-a706e9de29f3"
        ]
      },
      "31b45745-ac23-4359-b0a4-f07c4169ed18": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 9300,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "801b6a05-d510-42a1-b9ac-915bb2fa4ee8",
          "362a6f64-90c1-47b7-ba82-c009a8ce3f81",
          "1e368aab-59f3-4669-a9e8-b59d557f5cd3"
        ]
      },
      "b891d05f-2de3-4f34-b316-a95709cce3ea": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 9420,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "801b6a05-d510-42a1-b9ac-915bb2fa4ee8",
          "a5886500-240b-4d80-b2c9-478de6a84c1c",
          "a0307688-e8e6-42a9-90fe-9605f8f6bfb2"
        ]
      },
      "6066b903-759d-4101-bf62-77e489aff6ad": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 9510,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ],
        "isrelatedto": [
          "bd73c5a0-59d7-4ea6-bd86-b7abffc4f05c",
          "a5886500-240b-4d80-b2c9-478de6a84c1c"
        ]
      },
      "a1ba42fb-06e4-4ccb-9fe3-133ddf2fc023": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 9630,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "6066b903-759d-4101-bf62-77e489aff6ad"
        ]
      },
      "4b31d8ce-39fe-435c-95d7-7c71844acac9": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 9750,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "a1ba42fb-06e4-4ccb-9fe3-133ddf2fc023"
        ]
      },
      "d3c7f1b4-7656-48e6-bd7c-27fbc34031be": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 9870,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "a1ba42fb-06e4-4ccb-9fe3-133ddf2fc023"
        ]
      },
      "a3f6eca0-4d7c-492d-b45e-0259d46b4ae5": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 9990,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ],
        "isrelatedto": [
          "bd73c5a0-59d7-4ea6-bd86-b7abffc4f05c",
          "a5886500-240b-4d80-b2c9-478de6a84c1c"
        ]
      },
      "243e8ef6-31a0-435a-9756-e9fc384c9ff0": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 10110,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "a3f6eca0-4d7c-492d-b45e-0259d46b4ae5"
        ]
      },
      "969f8019-d591-4375-bff2-4e33d162e457": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 10230,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "243e8ef6-31a0-435a-9756-e9fc384c9ff0"
        ]
      },
      "186ea553-28d7-4986-a5c1-3a8acc13ac03": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 10350,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "243e8ef6-31a0-435a-9756-e9fc384c9ff0"
        ]
      },
      "9b3fda2a-79f0-4514-9a61-e29ddabde122": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 10470,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "3e7c3783-aa83-46c2-aed3-68ff38e5e89e",
          "a5886500-240b-4d80-b2c9-478de6a84c1c",
          "4b31d8ce-39fe-435c-95d7-7c71844acac9"
        ]
      },
      "0316109e-d723-46ff-8648-e1ff1c92fe46": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 10590,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "3e7c3783-aa83-46c2-aed3-68ff38e5e89e",
          "a5886500-240b-4d80-b2c9-478de6a84c1c",
          "969f8019-d591-4375-bff2-4e33d162e457"
        ]
      },
      "1f7822f5-ecef-42c6-aaf3-7ca0bb6aa0fd": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 10710,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "801b6a05-d510-42a1-b9ac-915bb2fa4ee8",
          "a5886500-240b-4d80-b2c9-478de6a84c1c",
          "d3c7f1b4-7656-48e6-bd7c-27fbc34031be"
        ]
      },
      "042884b0-8172-4c8c-9058-4741837ff612": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 10830,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "801b6a05-d510-42a1-b9ac-915bb2fa4ee8",
          "a5886500-240b-4d80-b2c9-478de6a84c1c",
          "186ea553-28d7-4986-a5c1-3a8acc13ac03"
        ]
      },
      "eafe6fed-a746-411c-99f5-b7fe4c677cdc": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 10920,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "c28d6830-bfee-41bf-b722-1836ecc21307": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 11040,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "5e1a8abb-cced-4bdf-a248-2df1500f5d8b": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 11160,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ]
      },
      "110cb565-7e63-4eeb-8369-78e68a224ebe": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1800,
          "y": 180
        },
        "z": 1,
        "embeds": [],
        "isconnectedto": [
          "5e1a8abb-cced-4bdf-a248-2df1500f5d8b"
        ],
        "isrelatedto": [
          "eafe6fed-a746-411c-99f5-b7fe4c677cdc"
        ]
      },
      "0779d7c2-6122-47b4-bc1d-cdbb228a6eaa": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 1920,
          "y": 180
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "a5886500-240b-4d80-b2c9-478de6a84c1c",
          "675cd568-f4f6-4660-ad27-e4ef02a4f424",
          "902fb76d-5c61-4bd3-b2a2-40d81681c1e2"
        ]
      },
      "a0212d97-665d-4aed-8825-02ea3c9dc58c": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2040,
          "y": 180
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "0779d7c2-6122-47b4-bc1d-cdbb228a6eaa"
        ]
      },
      "be2ac6ac-3513-4685-9e3f-fb6eba4cf2a2": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2160,
          "y": 180
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "a0212d97-665d-4aed-8825-02ea3c9dc58c",
          "a5886500-240b-4d80-b2c9-478de6a84c1c",
          "675cd568-f4f6-4660-ad27-e4ef02a4f424"
        ]
      },
      "9666049c-9a87-4cfc-bf13-97d1e2c49d77": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2280,
          "y": 180
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "0779d7c2-6122-47b4-bc1d-cdbb228a6eaa"
        ]
      },
      "4b2e19be-735b-40d7-893a-c38ae246a069": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 2400,
          "y": 180
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "9666049c-9a87-4cfc-bf13-97d1e2c49d77",
          "a5886500-240b-4d80-b2c9-478de6a84c1c",
          "675cd568-f4f6-4660-ad27-e4ef02a4f424"
        ]
      },
      "4f0a2c69-2cfc-47bd-973f-493f2cdc049a": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 11250,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "f7304559-f145-46f8-9ca7-2ceeb6a758ab": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 11370,
          "y": 90
        },
        "z": 1,
        "embeds": []
      },
      "cafab53c-11ee-455c-9b4c-0b759d38a515": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 11490,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "ismemberof": [
          "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        ]
      },
      "b3e3a23d-ab79-4395-a20b-0718f454ebdb": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 11610,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isconnectedto": [
          "cafab53c-11ee-455c-9b4c-0b759d38a515"
        ],
        "isrelatedto": [
          "4f0a2c69-2cfc-47bd-973f-493f2cdc049a"
        ]
      },
      "cbaf6177-2693-43d5-8e2b-433f4045b3e3": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 11730,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "a5886500-240b-4d80-b2c9-478de6a84c1c",
          "675cd568-f4f6-4660-ad27-e4ef02a4f424",
          "902fb76d-5c61-4bd3-b2a2-40d81681c1e2"
        ]
      },
      "b96af188-986d-485a-ad98-f5ca1cf3f90b": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 11850,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "cbaf6177-2693-43d5-8e2b-433f4045b3e3"
        ]
      },
      "eba570c8-a767-4ff5-91ed-154fd10899e2": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 11970,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "b96af188-986d-485a-ad98-f5ca1cf3f90b",
          "a5886500-240b-4d80-b2c9-478de6a84c1c",
          "675cd568-f4f6-4660-ad27-e4ef02a4f424"
        ]
      },
      "f159b181-fe28-4494-9d9b-64d8af782826": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 12090,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "cbaf6177-2693-43d5-8e2b-433f4045b3e3"
        ]
      },
      "d4def3cb-9fe8-4c02-959e-7fa8c82f4f96": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 12210,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isrelatedto": [
          "f159b181-fe28-4494-9d9b-64d8af782826",
          "a5886500-240b-4d80-b2c9-478de6a84c1c",
          "675cd568-f4f6-4660-ad27-e4ef02a4f424"
        ]
      },
      "2699d875-257d-4a53-8eb3-5fe697d8874b": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 12300,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "64ed7431-3630-429a-9a70-096685bee822"
        ]
      },
      "d269d58e-183b-45b5-9486-4d3a30a95839": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 12420,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "64ed7431-3630-429a-9a70-096685bee822"
        ]
      },
      "05b0f9f4-46ac-4e0e-9830-2429eecb6036": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 12540,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "fffb2e72-8736-476f-bef5-befe59537214"
        ]
      },
      "758ce8df-24a1-4a8f-813d-a706e9de29f3": {
        "size": {
          "width": 60,
          "height": 60
        },
        "position": {
          "x": 12660,
          "y": 90
        },
        "z": 1,
        "embeds": [],
        "isassociatedwith": [
          "fffb2e72-8736-476f-bef5-befe59537214"
        ]
      }
    },
    "AWS::CloudFormation::Interface": {
      "ParameterGroups": [
        {
          "Label": {
            "default": "Network Configuration"
          },
          "Parameters": [
            "VPC",
            "PrivateSubnets",
            "PublicSubnets"
          ]
        },
        {
          "Label": {
            "default": "Amazon EC2 Configuration"
          },
          "Parameters": [
            "PrivateInstanceType",
            "PublicInstanceType",
            "KeyName"
          ]
        },
        {
          "Label": {
            "default": "Private Cluster Configuration"
          },
          "Parameters": [
            "MaxPrivateClusterSize",
            "MinPrivateClusterSize",
            "CPUHighThresholdPrivate",
            "CPULowThresholdPrivate"
          ]
        },
        {
          "Label": {
            "default": "Public Cluster Configuration"
          },
          "Parameters": [
            "MaxPublicClusterSize",
            "MinPublicClusterSize",
            "CPUHighThresholdPublic",
            "CPULowThresholdPublic"
          ]
        },
        {
          "Label": {
            "default": "Liferay Task Configuration"
          },
          "Parameters": [
            "LiferayMemory",
            "LiferayCpu",
            "LiferayImageVersion",
            "LiferayContainerPort"
          ]
        },
        {
          "Label": {
            "default": "Autoproc Task Configuration"
          },
          "Parameters": [
            "AutoprocMemory",
            "AutoprocCpu",
            "AutoprocImageVersion",
            "AutoprocContainerPort"
          ]
        },
        {
          "Label": {
            "default": "Bodybeast Task Configuration"
          },
          "Parameters": [
            "BodybeastMemory",
            "BodybeastCpu",
            "BodybeastImageVersion",
            "BodybeastContainerPort"
          ]
        },
        {
          "Label": {
            "default": "General Task Configuration"
          },
          "Parameters": [
            "GeneralMemory",
            "GeneralCpu",
            "GeneralImageVersion",
            "GeneralContainerPort"
          ]
        },
        {
          "Label": {
            "default": "Certification Task Configuration"
          },
          "Parameters": [
            "CertificationMemory",
            "CertificationCpu",
            "CertificationImageVersion",
            "CertificationContainerPort"
          ]
        },
        {
          "Label": {
            "default": "Common Appplication Configuration"
          },
          "Parameters": [
            "ApplicationCPUHighThreshold",
            "ApplicationCPULowThreshold"
          ]
        },
        {
          "Label": {
            "default": "Liferay Service Configuration"
          },
          "Parameters": [
            "MaxLiferaySize",
            "MinLiferaySize"
          ]
        },
        {
          "Label": {
            "default": "Bodybeast Service Configuration"
          },
          "Parameters": [
            "MaxBodybeastSize",
            "MinBodybeastSize"
          ]
        },
        {
          "Label": {
            "default": "Autoproc Service Configuration"
          },
          "Parameters": [
            "MaxAutoprocSize",
            "MinAutoprocSize"
          ]
        },
        {
          "Label": {
            "default": "General Service Configuration"
          },
          "Parameters": [
            "MaxGeneralSize",
            "MinGeneralSize"
          ]
        },
        {
          "Label": {
            "default": "Certification Service Configuration"
          },
          "Parameters": [
            "MaxCertificationSize",
            "MinCertificationSize"
          ]
        },
        {
          "Label": {
            "default": "Solr Service Configuration"
          },
          "Parameters": [
            "MinSolrSlaveSize",
            "MaxSolrSlaveSize",
            "SolrCpu",
            "SolrMemory",
            "SolrSlaveMasterNode",
            "SolrContainerPort",
            "SolrImageVersion"
          ]
        }
      ],
      "ParameterLabels": {
        "PrivateSubnets": {
          "default": "Select Private Subnets"
        },
        "PublicSubnets": {
          "default": "Select Public Subnets"
        }
      }
    }
  },
  "Parameters": {
    "VPC": {
      "Type": "AWS::EC2::VPC::Id",
      "Description": "VpcId of your existing Virtual Private Cloud (VPC)"
    },
    "PrivateInstanceType": {
      "Description": "Private EC2 instance type",
      "Type": "String",
      "Default": "m4.xlarge",
      "AllowedValues": [
        "t1.micro",
        "t2.nano",
        "t2.micro",
        "t2.small",
        "t2.medium",
        "t2.large",
        "m1.small",
        "m1.medium",
        "m1.large",
        "m1.xlarge",
        "m2.xlarge",
        "m2.2xlarge",
        "m2.4xlarge",
        "m3.medium",
        "m3.large",
        "m3.xlarge",
        "m3.2xlarge",
        "m4.large",
        "m4.xlarge",
        "m4.2xlarge",
        "m4.4xlarge",
        "m4.10xlarge",
        "c1.medium",
        "c1.xlarge",
        "c3.large",
        "c3.xlarge",
        "c3.2xlarge",
        "c3.4xlarge",
        "c3.8xlarge",
        "c4.large",
        "c4.xlarge",
        "c4.2xlarge",
        "c4.4xlarge",
        "c4.8xlarge",
        "g2.2xlarge",
        "g2.8xlarge",
        "r3.large",
        "r3.xlarge",
        "r3.2xlarge",
        "r3.4xlarge",
        "r3.8xlarge",
        "i2.xlarge",
        "i2.2xlarge",
        "i2.4xlarge",
        "i2.8xlarge",
        "d2.xlarge",
        "d2.2xlarge",
        "d2.4xlarge",
        "d2.8xlarge",
        "hi1.4xlarge",
        "hs1.8xlarge",
        "cr1.8xlarge",
        "cc2.8xlarge",
        "cg1.4xlarge"
      ],
      "ConstraintDescription": "must be a valid EC2 instance type."
    },
    "PublicInstanceType": {
      "Description": "Public EC2 instance type",
      "Type": "String",
      "Default": "m3.large",
      "AllowedValues": [
        "t1.micro",
        "t2.nano",
        "t2.micro",
        "t2.small",
        "t2.medium",
        "t2.large",
        "m1.small",
        "m1.medium",
        "m1.large",
        "m1.xlarge",
        "m2.xlarge",
        "m2.2xlarge",
        "m2.4xlarge",
        "m3.medium",
        "m3.large",
        "m3.xlarge",
        "m3.2xlarge",
        "m4.large",
        "m4.xlarge",
        "m4.2xlarge",
        "m4.4xlarge",
        "m4.10xlarge",
        "c1.medium",
        "c1.xlarge",
        "c3.large",
        "c3.xlarge",
        "c3.2xlarge",
        "c3.4xlarge",
        "c3.8xlarge",
        "c4.large",
        "c4.xlarge",
        "c4.2xlarge",
        "c4.4xlarge",
        "c4.8xlarge",
        "g2.2xlarge",
        "g2.8xlarge",
        "r3.large",
        "r3.xlarge",
        "r3.2xlarge",
        "r3.4xlarge",
        "r3.8xlarge",
        "i2.xlarge",
        "i2.2xlarge",
        "i2.4xlarge",
        "i2.8xlarge",
        "d2.xlarge",
        "d2.2xlarge",
        "d2.4xlarge",
        "d2.8xlarge",
        "hi1.4xlarge",
        "hs1.8xlarge",
        "cr1.8xlarge",
        "cc2.8xlarge",
        "cg1.4xlarge"
      ],
      "ConstraintDescription": "must be a valid EC2 instance type."
    },
    "PrivateSubnets": {
      "Description": "subnets in which cluster will have instances",
      "Type": "List<AWS::EC2::Subnet::Id>",
      "ConstraintDescription": "must be list of subnet ids"
    },
    "PublicSubnets": {
      "Description": "subnets in which cluster will have instances",
      "Type": "List<AWS::EC2::Subnet::Id>",
      "ConstraintDescription": "must be list of subnet ids"
    },
    "KeyName": {
      "Description": "Name of an existing EC2 KeyPair to enable SSH access to the instance",
      "Type": "AWS::EC2::KeyPair::KeyName",
      "ConstraintDescription": "must be the name of an existing EC2 KeyPair."
    },
    "MaxPrivateClusterSize": {
      "Description": "Max number of ec2 instances in cluster",
      "Type": "String",
      "Default": "12",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "MinPrivateClusterSize": {
      "Description": "Minimum number of ec2 instances in cluster",
      "Type": "String",
      "Default": "5",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "CPUHighThresholdPrivate": {
      "Description": "CPU in percentage at which new instance will be spinned up",
      "Type": "String",
      "Default": "80",
      "ConstraintDescription": "must be a numerical value.(0-99)",
      "AllowedPattern": "[0-9]*"
    },
    "CPULowThresholdPrivate": {
      "Description": "CPU in percentage at which instance will be reduced",
      "Type": "String",
      "Default": "60",
      "ConstraintDescription": "must be a numerical value.(0-99)",
      "AllowedPattern": "[0-9]*"
    },
    "MaxPublicClusterSize": {
      "Description": "Max number of ec2 instances in cluster",
      "Type": "String",
      "Default": "6",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "MinPublicClusterSize": {
      "Description": "Minimum number of ec2 instances in cluster",
      "Type": "String",
      "Default": "2",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "CPUHighThresholdPublic": {
      "Description": "CPU in percentage at which new instance will be spinned up",
      "Type": "String",
      "Default": "80",
      "ConstraintDescription": "must be a numerical value.(0-99)",
      "AllowedPattern": "[0-9]*"
    },
    "CPULowThresholdPublic": {
      "Description": "CPU in percentage at which instance will be reduced",
      "Type": "String",
      "Default": "60",
      "ConstraintDescription": "must be a numerical value.(0-99)",
      "AllowedPattern": "[0-9]*"
    },
    "ApplicationCPUHighThreshold": {
      "Description": "CPU in percentage at which new Application container will be spinned up",
      "Type": "String",
      "Default": "100",
      "ConstraintDescription": "must be a numerical value.(0-99)",
      "AllowedPattern": "[0-9]*"
    },
    "ApplicationCPULowThreshold": {
      "Description": "CPU in percentage at which  Application container will be removed",
      "Type": "String",
      "Default": "50",
      "ConstraintDescription": "must be a numerical value.(0-99)",
      "AllowedPattern": "[0-9]*"
    },
    "MaxLiferaySize": {
      "Description": "Max number of Liferay containers in service",
      "Type": "String",
      "Default": "2",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "MinLiferaySize": {
      "Description": "Minimum number of Liferay containers in service",
      "Type": "String",
      "Default": "1",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "LiferayMemory": {
      "Description": "Memory for liferay",
      "Type": "String",
      "Default": "9000",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "LiferayCpu": {
      "Description": "Cpu for liferay",
      "Type": "String",
      "Default": "2048",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "LiferayImageVersion": {
      "Description": "Tag for liferay  Image",
      "Type": "String",
      "Default": "latest",
      "ConstraintDescription": "must be a valid Tag."
    },
    "LiferayContainerPort": {
      "Description": "Port of container",
      "Type": "String",
      "Default": "8080",
      "ConstraintDescription": "must be a valid port.",
      "AllowedPattern": "[0-9]*"
    },
    "MaxBodybeastSize": {
      "Description": "Max number of Bodybeast containers in service",
      "Type": "String",
      "Default": "2",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "MinBodybeastSize": {
      "Description": "Minimum number of Bodybeast containers in service",
      "Type": "String",
      "Default": "1",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "BodybeastMemory": {
      "Description": "Memory for Bodybeast",
      "Type": "String",
      "Default": "4000",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "BodybeastCpu": {
      "Description": "Cpu for Bodybeast",
      "Type": "String",
      "Default": "400",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "BodybeastImageVersion": {
      "Description": "Tag for Bodybeast  Image",
      "Type": "String",
      "Default": "latest",
      "ConstraintDescription": "must be a valid Tag."
    },
    "BodybeastContainerPort": {
      "Description": "Port of container",
      "Type": "String",
      "Default": "8080",
      "ConstraintDescription": "must be a valid port.",
      "AllowedPattern": "[0-9]*"
    },
    "MaxCertificationSize": {
      "Description": "Max number of Certification containers in service",
      "Type": "String",
      "Default": "2",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "MinCertificationSize": {
      "Description": "Minimum number of Certification containers in service",
      "Type": "String",
      "Default": "1",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "CertificationMemory": {
      "Description": "Memory for Certification",
      "Type": "String",
      "Default": "3000",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "CertificationCpu": {
      "Description": "Cpu for Certification",
      "Type": "String",
      "Default": "300",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "CertificationImageVersion": {
      "Description": "Tag for Certification  Image",
      "Type": "String",
      "Default": "latest",
      "ConstraintDescription": "must be a valid Tag."
    },
    "CertificationContainerPort": {
      "Description": "Port of container",
      "Type": "String",
      "Default": "8080",
      "ConstraintDescription": "must be a valid port.",
      "AllowedPattern": "[0-9]*"
    },
    "MaxAutoprocSize": {
      "Description": "Max number of Autoproc containers in service",
      "Type": "String",
      "Default": "2",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "MinAutoprocSize": {
      "Description": "Minimum number of Autoproc containers in service",
      "Type": "String",
      "Default": "1",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "AutoprocMemory": {
      "Description": "Memory for Autoproc",
      "Type": "String",
      "Default": "5000",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "AutoprocCpu": {
      "Description": "Cpu for Autoproc",
      "Type": "String",
      "Default": "1000",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "AutoprocImageVersion": {
      "Description": "Tag for Autoproc  Image",
      "Type": "String",
      "Default": "latest",
      "ConstraintDescription": "must be a valid Tag."
    },
    "AutoprocContainerPort": {
      "Description": "Port of container",
      "Type": "String",
      "Default": "8080",
      "ConstraintDescription": "must be a valid port.",
      "AllowedPattern": "[0-9]*"
    },
    "MaxGeneralSize": {
      "Description": "Max number of General containers in service",
      "Type": "String",
      "Default": "2",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "MinGeneralSize": {
      "Description": "Minimum number of General containers in service",
      "Type": "String",
      "Default": "1",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "GeneralMemory": {
      "Description": "Memory for General",
      "Type": "String",
      "Default": "3000",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "GeneralCpu": {
      "Description": "Cpu for General",
      "Type": "String",
      "Default": "500",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "GeneralImageVersion": {
      "Description": "Tag for General  Image",
      "Type": "String",
      "Default": "latest",
      "ConstraintDescription": "must be a valid Tag."
    },
    "GeneralContainerPort": {
      "Description": "Port of container",
      "Type": "String",
      "Default": "8080",
      "ConstraintDescription": "must be a valid port.",
      "AllowedPattern": "[0-9]*"
    },
    "MaxSolrSlaveSize": {
      "Description": "Max number of SolrSlave containers in service",
      "Type": "String",
      "Default": "2",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "MinSolrSlaveSize": {
      "Description": "Minimum number of SolrSlave containers in service",
      "Type": "String",
      "Default": "1",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "SolrCpu": {
      "Description": "Cpu for SolrSlave",
      "Type": "String",
      "Default": "200",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "SolrImageVersion": {
      "Description": "Tag for SolrSlave  Image",
      "Type": "String",
      "Default": "latest",
      "ConstraintDescription": "must be a valid Tag."
    },
    "SolrContainerPort": {
      "Description": "Port of container",
      "Type": "String",
      "Default": "8983",
      "ConstraintDescription": "must be a valid port.",
      "AllowedPattern": "[0-9]*"
    },
    "SolrMemory": {
      "Description": "Memory for SolrSlave",
      "Type": "String",
      "Default": "2000",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "SolrSlaveMasterNode": {
      "Description": "Master Node  for solr slave",
      "Type": "String",
      "Default": "itbb-app1.productpartners.com:8983",
      "ConstraintDescription": "must be a master solr node."
    },
    "SolrGlobalNutchImageVersion": {
      "Description": "Tag for Solr Global Nutch  Image",
      "Type": "String",
      "Default": "latest",
      "ConstraintDescription": "must be a valid Tag."
    },
    "SolrBURNutchImageVersion": {
      "Description": "Tag for Solr BUR Nutch  Image",
      "Type": "String",
      "Default": "latest",
      "ConstraintDescription": "must be a valid Tag."
    },
    "SolrNutchMemory": {
      "Description": "Memory for Solr Nutch",
      "Type": "String",
      "Default": "2000",
      "ConstraintDescription": "must be a numerical value.",
      "AllowedPattern": "[0-9]*"
    },
    "SolrNutchPort": {
      "Description": "Port of container",
      "Type": "String",
      "Default": "8983",
      "ConstraintDescription": "must be a valid port.",
      "AllowedPattern": "[0-9]*"
    },
    "ConfigEnv": {
      "Description": "Configuration Environment volume container",
      "Type": "String",
      "Default": "config_dr",
      "ConstraintDescription": "must be a valid volume docker."
    }
  },
  "Mappings": {
    "AWSRegion2AMI": {
      "us-east-1": {
        "64": "ami-c481fad3"
      },
      "us-west-2": {
        "64": "ami-b04e92d0"
      },
      "us-west-1": {
        "64": "ami-de347abe"
      },
      "eu-west-1": {
        "64": "ami-d41d58a7"
      },
      "eu-central-1": {
        "64": "ami-0044b96f"
      },
      "ap-northeast-1": {
        "64": "ami-1a15c77b"
      },
      "ap-northeast-2": {
        "64": "ami-a04297ce"
      },
      "ap-southeast-1": {
        "64": "ami-7243e611"
      },
      "ap-southeast-2": {
        "64": "ami-55d4e436"
      },
      "ap-south-1": {
        "64": "ami-cacbbea5"
      },
      "sa-east-1": {
        "64": "ami-b777e4db"
      },
      "cn-north-1": {
        "64": "ami-fa875397}"
      }
    }
  },
  "Resources": {
    "SGPublic": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "GroupDescription": "PublicSG",
        "SecurityGroupIngress": [
          {
            "IpProtocol": "tcp",
            "FromPort": "80",
            "ToPort": "80",
            "CidrIp": "0.0.0.0/0"
          }
        ],
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "7be9b3d0-21a0-4618-979d-cb87df42dacc"
        }
      }
    },
    "SGPrivate": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "VpcId": {
          "Ref": "VPC"
        },
        "SecurityGroupIngress": [
          {
            "IpProtocol": "tcp",
            "FromPort": "0",
            "ToPort": "65535",
            "CidrIp": "10.0.0.0/8"
          },
          {
            "IpProtocol": "tcp",
            "FromPort": "0",
            "ToPort": "65535",
            "CidrIp": "172.0.0.0/8"
          }
        ],
        "GroupDescription": "PrivateSG"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "08ee8b98-14a9-411a-a19b-e4ffd0e52a54"
        }
      }
    },
    "ECSServiceRole": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "RoleName": "ECSServiceRole",
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "ecs.amazonaws.com"
                ]
              },
              "Action": [
                "sts:AssumeRole"
              ]
            }
          ]
        },
        "Path": "/",
        "Policies": [
          {
            "PolicyName": "ecs-service",
            "PolicyDocument": {
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "elasticloadbalancing:Describe*",
                    "elasticloadbalancing:DeregisterInstancesFromLoadBalancer",
                    "elasticloadbalancing:RegisterInstancesWithLoadBalancer",
                    "elasticloadbalancing:DeregisterTargets",
                    "elasticloadbalancing:DescribeTargetGroups",
                    "elasticloadbalancing:DescribeTargetHealth",
                    "elasticloadbalancing:RegisterTargets",
                    "ec2:Describe*",
                    "ec2:AuthorizeSecurityGroupIngress"
                  ],
                  "Resource": "*"
                }
              ]
            }
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "afc41914-9504-4b0c-9803-53ce18f0d6dc"
        }
      }
    },
    "EC2Role": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "RoleName": "EC2Role",
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "ec2.amazonaws.com"
                ]
              },
              "Action": [
                "sts:AssumeRole"
              ]
            }
          ]
        },
        "Path": "/",
        "Policies": [
          {
            "PolicyName": "ecs-service",
            "PolicyDocument": {
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "ecs:CreateCluster",
                    "ecs:DeregisterContainerInstance",
                    "ecs:DiscoverPollEndpoint",
                    "ecs:Poll",
                    "ecs:RegisterContainerInstance",
                    "ecs:StartTelemetrySession",
                    "ecs:Submit*",
                    "ecr:BatchCheckLayerAvailability",
                    "ecr:BatchGetImage",
                    "ecr:GetDownloadUrlForLayer",
                    "ecr:GetAuthorizationToken",
                    "logs:CreateLogStream",
                    "logs:PutLogEvents"
                  ],
                  "Resource": "*"
                }
              ]
            }
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "bff0e498-41da-485a-88da-4f4fa4b9718e"
        }
      }
    },
    "EC2InstanceProfile": {
      "Type": "AWS::IAM::InstanceProfile",
      "Properties": {
        "Path": "/",
        "Roles": [
          {
            "Ref": "EC2Role"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "bd73c5a0-59d7-4ea6-bd86-b7abffc4f05c"
        }
      }
    },
    "ECSPublicCluster": {
      "Type": "AWS::ECS::Cluster",
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "49df8a6c-9cc8-4b82-8c63-77faa8ddc10d"
        }
      }
    },
    "ECSPrivateCluster": {
      "Type": "AWS::ECS::Cluster",
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "ce37dbb8-6d96-4a0c-9930-2ba5995f5e32"
        }
      }
    },
    "ECSPrivateClusterSolrSlave": {
      "Type": "AWS::ECS::Cluster",
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "a5886500-240b-4d80-b2c9-478de6a84c1c"
        }
      }
    },
    "ECSPrivateClusterSolrGlobalNutch": {
      "Type": "AWS::ECS::Cluster",
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "a5886500-240b-4d80-b2c9-478de6a84c1c"
        }
      }
    },
    "ECSPrivateClusterSolrBURNutch": {
      "Type": "AWS::ECS::Cluster",
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "a5886500-240b-4d80-b2c9-478de6a84c1c"
        }
      }
    },
    "ECSPrivateClusterSolrMaster": {
      "Type": "AWS::ECS::Cluster",
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "362a6f64-90c1-47b7-ba82-c009a8ce3f81"
        }
      }
    },
    "ECSPrivateClusterMongoReplica1": {
      "Type": "AWS::ECS::Cluster",
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "fe7c9350-e0bd-4c94-9a49-72ef05e4351d"
        }
      }
    },
    "ECSPrivateClusterMongoReplica2": {
      "Type": "AWS::ECS::Cluster",
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "8b5c1319-4770-41d0-9c75-8a8532073b06"
        }
      }
    },
    "AutoscalingPrivateGroup": {
      "Type": "AWS::AutoScaling::AutoScalingGroup",
      "Properties": {
        "LaunchConfigurationName": {
          "Ref": "LaunchConfigPrivate"
        },
        "DesiredCapacity": {
          "Ref": "MinPrivateClusterSize"
        },
        "MaxSize": {
          "Ref": "MaxPrivateClusterSize"
        },
        "MinSize": {
          "Ref": "MinPrivateClusterSize"
        },
        "VPCZoneIdentifier": {
          "Ref": "PrivateSubnets"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "24e87d95-218f-4d62-b08c-78881e4af3ff"
        }
      }
    },
    "AutoscalingPublicGroup": {
      "Type": "AWS::AutoScaling::AutoScalingGroup",
      "Properties": {
        "LaunchConfigurationName": {
          "Ref": "LaunchConfigPublic"
        },
        "DesiredCapacity": {
          "Ref": "MinPublicClusterSize"
        },
        "MaxSize": {
          "Ref": "MaxPublicClusterSize"
        },
        "MinSize": {
          "Ref": "MinPublicClusterSize"
        },
        "VPCZoneIdentifier": {
          "Ref": "PublicSubnets"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "26789646-5a4e-464f-9c80-06cfd8abfc9b"
        }
      }
    },
    "AutoscalingSolrSlaveGroup": {
      "Type": "AWS::AutoScaling::AutoScalingGroup",
      "Properties": {
        "LaunchConfigurationName": {
          "Ref": "LaunchConfigSolrSlave"
        },
        "DesiredCapacity": "2",
        "MaxSize": "3",
        "MinSize": "2",
        "VPCZoneIdentifier": {
          "Ref": "PrivateSubnets"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "612b9028-dec5-4b64-add3-a43edf5d1a0a"
        }
      }
    },
    "AutoscalingSolrGlobalNutchGroup": {
      "Type": "AWS::AutoScaling::AutoScalingGroup",
      "Properties": {
        "LaunchConfigurationName": {
          "Ref": "LaunchConfigSolrGlobalNutch"
        },
        "DesiredCapacity": "1",
        "MaxSize": "2",
        "MinSize": "1",
        "VPCZoneIdentifier": {
          "Ref": "PrivateSubnets"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "243e8ef6-31a0-435a-9756-e9fc384c9ff0"
        }
      }
    },
    "AutoscalingSolrBURNutchGroup": {
      "Type": "AWS::AutoScaling::AutoScalingGroup",
      "Properties": {
        "LaunchConfigurationName": {
          "Ref": "LaunchConfigSolrBURNutch"
        },
        "DesiredCapacity": "1",
        "MaxSize": "2",
        "MinSize": "1",
        "VPCZoneIdentifier": {
          "Ref": "PrivateSubnets"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "a1ba42fb-06e4-4ccb-9fe3-133ddf2fc023"
        }
      }
    },
    "AutoscalingSolrMasterGroup": {
      "Type": "AWS::AutoScaling::AutoScalingGroup",
      "Properties": {
        "LaunchConfigurationName": {
          "Ref": "LaunchConfigSolrMaster"
        },
        "DesiredCapacity": "1",
        "MaxSize": "2",
        "MinSize": "1",
        "VPCZoneIdentifier": {
          "Ref": "PrivateSubnets"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "b5c8a0d3-5d07-4712-afc5-d98fbbd181b7"
        }
      }
    },
    "AutoscalingMongoReplica1Group": {
      "Type": "AWS::AutoScaling::AutoScalingGroup",
      "Properties": {
        "LaunchConfigurationName": {
          "Ref": "LaunchConfigMongoReplica1"
        },
        "DesiredCapacity": "1",
        "MaxSize": "2",
        "MinSize": "1",
        "VPCZoneIdentifier": {
          "Ref": "PrivateSubnets"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "fffb2e72-8736-476f-bef5-befe59537214"
        }
      }
    },
    "AutoscalingMongoReplica2Group": {
      "Type": "AWS::AutoScaling::AutoScalingGroup",
      "Properties": {
        "LaunchConfigurationName": {
          "Ref": "LaunchConfigMongoReplica2"
        },
        "DesiredCapacity": "1",
        "MaxSize": "2",
        "MinSize": "1",
        "VPCZoneIdentifier": {
          "Ref": "PrivateSubnets"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "64ed7431-3630-429a-9a70-096685bee822"
        }
      }
    },
    "LaunchConfigPrivate": {
      "Type": "AWS::AutoScaling::LaunchConfiguration",
      "Properties": {
        "ImageId": {
          "Fn::FindInMap": [
            "AWSRegion2AMI",
            {
              "Ref": "AWS::Region"
            },
            "64"
          ]
        },
        "InstanceType": {
          "Ref": "PrivateInstanceType"
        },
        "IamInstanceProfile": {
          "Ref": "EC2InstanceProfile"
        },
        "UserData": {
          "Fn::Base64": {
            "Fn::Join": [
              "",
              [
                "#!/bin/bash\n",
                "yum update -y\n",
                "yum install -y ecs-init\n",
                "yum install -y docker\n",
                "sed -i  '1s/^/nameserver 10.1.64.15\\nnameserver 10.253.34.15\\n/' /etc/resolv.conf\n",
                "echo ECS_CLUSTER=",
                {
                  "Ref": "ECSPrivateCluster"
                },
                " > /etc/ecs/ecs.config\n",
                "service docker restart\n",
                "start ecs\n"
              ]
            ]
          }
        },
        "InstanceMonitoring": "false",
        "KeyName": {
          "Ref": "KeyName"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "BlockDeviceMappings": [
          {
            "DeviceName": "/dev/xvda",
            "Ebs": {
              "VolumeSize": "100",
              "VolumeType": "io1",
              "Iops": 500
            }
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "c8734a4d-44e9-4518-997c-7f9317f720bb"
        }
      }
    },
    "LaunchConfigPublic": {
      "Type": "AWS::AutoScaling::LaunchConfiguration",
      "Properties": {
        "AssociatePublicIpAddress": "true",
        "ImageId": {
          "Fn::FindInMap": [
            "AWSRegion2AMI",
            {
              "Ref": "AWS::Region"
            },
            "64"
          ]
        },
        "InstanceType": {
          "Ref": "PublicInstanceType"
        },
        "IamInstanceProfile": {
          "Ref": "EC2InstanceProfile"
        },
        "UserData": {
          "Fn::Base64": {
            "Fn::Join": [
              "",
              [
                "#!/bin/bash\n",
                "yum update -y\n",
                "yum install -y ecs-init\n",
                "yum install -y docker\n",
                "sed -i  '1s/^/nameserver 10.1.64.15\\nnameserver 10.253.34.15\\n/' /etc/resolv.conf\n",
                "echo ECS_CLUSTER=",
                {
                  "Ref": "ECSPublicCluster"
                },
                " > /etc/ecs/ecs.config\n",
                "service docker restart\n",
                "start ecs\n"
              ]
            ]
          }
        },
        "InstanceMonitoring": "false",
        "KeyName": {
          "Ref": "KeyName"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPublic"
          },
          {
            "Ref": "SGPrivate"
          }
        ],
        "BlockDeviceMappings": [
          {
            "DeviceName": "/dev/xvda",
            "Ebs": {
              "VolumeSize": "100",
              "VolumeType": "io1",
              "Iops": 500
            }
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "ebde2632-86df-4aad-a110-186d1cfd3bd4"
        }
      }
    },
    "LaunchConfigSolrSlave": {
      "Type": "AWS::AutoScaling::LaunchConfiguration",
      "Properties": {
        "ImageId": {
          "Fn::FindInMap": [
            "AWSRegion2AMI",
            {
              "Ref": "AWS::Region"
            },
            "64"
          ]
        },
        "InstanceType": {
          "Ref": "PrivateInstanceType"
        },
        "IamInstanceProfile": {
          "Ref": "EC2InstanceProfile"
        },
        "UserData": {
          "Fn::Base64": {
            "Fn::Join": [
              "",
              [
                "#!/bin/bash\n",
                "yum update -y\n",
                "yum install -y ecs-init\n",
                "yum install -y docker\n",
                "sed -i  '1s/^/nameserver 10.1.64.15\\nnameserver 10.253.34.15\\n/' /etc/resolv.conf\n",
                "mkfs -t ext4 /dev/`lsblk  | grep 200G | grep xvd | awk '{print$1}'`\n",
                "mkdir -p /opt/data\n",
                "chmod -R 777 /opt/data\n",
                "cp /etc/fstab /etc/fstab.orig\n",
                "echo /dev/`lsblk  | grep 200G | grep xvd | awk '{print$1}'` /opt/data/ ext4 defaults, nofail 0 2  >> /etc/fstab\n",
                "mount -a\n",
                "echo ECS_CLUSTER=",
                {
                  "Ref": "ECSPrivateClusterSolrSlave"
                },
                " > /etc/ecs/ecs.config\n",
                "service docker restart\n",
                "start ecs\n"
              ]
            ]
          }
        },
        "InstanceMonitoring": "false",
        "KeyName": {
          "Ref": "KeyName"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "BlockDeviceMappings": [
          {
            "DeviceName": "/dev/xvda",
            "Ebs": {
              "VolumeSize": "100",
              "VolumeType": "io1",
              "Iops": 500
            }
          },
          {
            "DeviceName": "/dev/xvdb",
            "Ebs": {
              "DeleteOnTermination": "false",
              "VolumeSize": "200",
              "VolumeType": "io1",
              "Iops": 500
            }
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "ecd35d3a-60b5-4967-ad73-72efd1df3266"
        }
      }
    },
    "LaunchConfigSolrGlobalNutch": {
      "Type": "AWS::AutoScaling::LaunchConfiguration",
      "Properties": {
        "ImageId": {
          "Fn::FindInMap": [
            "AWSRegion2AMI",
            {
              "Ref": "AWS::Region"
            },
            "64"
          ]
        },
        "InstanceType": {
          "Ref": "PrivateInstanceType"
        },
        "IamInstanceProfile": {
          "Ref": "EC2InstanceProfile"
        },
        "UserData": {
          "Fn::Base64": {
            "Fn::Join": [
              "",
              [
                "#!/bin/bash\n",
                "yum update -y\n",
                "yum install -y ecs-init\n",
                "yum install -y docker\n",
                "sed -i  '1s/^/nameserver 10.1.64.15\\nnameserver 10.253.34.15\\n/' /etc/resolv.conf\n",
                "mkfs -t ext4 /dev/`lsblk  | grep 200G | grep xvd | awk '{print$1}'`\n",
                "mkdir -p /opt/data\n",
                "chmod -R 777 /opt/data\n",
                "cp /etc/fstab /etc/fstab.orig\n",
                "echo /dev/`lsblk  | grep 200G | grep xvd | awk '{print$1}'` /opt/data/ ext4 defaults, nofail 0 2  >> /etc/fstab\n",
                "mount -a\n",
                "echo ECS_CLUSTER=",
                {
                  "Ref": "ECSPrivateClusterSolrGlobalNutch"
                },
                " > /etc/ecs/ecs.config\n",
                "service docker restart\n",
                "start ecs\n"
              ]
            ]
          }
        },
        "InstanceMonitoring": "false",
        "KeyName": {
          "Ref": "KeyName"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "BlockDeviceMappings": [
          {
            "DeviceName": "/dev/xvda",
            "Ebs": {
              "VolumeSize": "100",
              "VolumeType": "io1",
              "Iops": 500
            }
          },
          {
            "DeviceName": "/dev/xvdb",
            "Ebs": {
              "DeleteOnTermination": "false",
              "VolumeSize": "200",
              "VolumeType": "io1",
              "Iops": 500
            }
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "a3f6eca0-4d7c-492d-b45e-0259d46b4ae5"
        }
      }
    },
    "LaunchConfigSolrBURNutch": {
      "Type": "AWS::AutoScaling::LaunchConfiguration",
      "Properties": {
        "ImageId": {
          "Fn::FindInMap": [
            "AWSRegion2AMI",
            {
              "Ref": "AWS::Region"
            },
            "64"
          ]
        },
        "InstanceType": {
          "Ref": "PrivateInstanceType"
        },
        "IamInstanceProfile": {
          "Ref": "EC2InstanceProfile"
        },
        "UserData": {
          "Fn::Base64": {
            "Fn::Join": [
              "",
              [
                "#!/bin/bash\n",
                "yum update -y\n",
                "yum install -y ecs-init\n",
                "yum install -y docker\n",
                "sed -i  '1s/^/nameserver 10.1.64.15\\nnameserver 10.253.34.15\\n/' /etc/resolv.conf\n",
                "mkfs -t ext4 /dev/`lsblk  | grep 200G | grep xvd | awk '{print$1}'`\n",
                "mkdir -p /opt/data\n",
                "chmod -R 777 /opt/data\n",
                "cp /etc/fstab /etc/fstab.orig\n",
                "echo /dev/`lsblk  | grep 200G | grep xvd | awk '{print$1}'` /opt/data/ ext4 defaults, nofail 0 2  >> /etc/fstab\n",
                "mount -a\n",
                "echo ECS_CLUSTER=",
                {
                  "Ref": "ECSPrivateClusterSolrBURNutch"
                },
                " > /etc/ecs/ecs.config\n",
                "service docker restart\n",
                "start ecs\n"
              ]
            ]
          }
        },
        "InstanceMonitoring": "false",
        "KeyName": {
          "Ref": "KeyName"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "BlockDeviceMappings": [
          {
            "DeviceName": "/dev/xvda",
            "Ebs": {
              "VolumeSize": "100",
              "VolumeType": "io1",
              "Iops": 500
            }
          },
          {
            "DeviceName": "/dev/xvdb",
            "Ebs": {
              "DeleteOnTermination": "false",
              "VolumeSize": "200",
              "VolumeType": "io1",
              "Iops": 500
            }
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "6066b903-759d-4101-bf62-77e489aff6ad"
        }
      }
    },
    "LaunchConfigSolrMaster": {
      "Type": "AWS::AutoScaling::LaunchConfiguration",
      "Properties": {
        "ImageId": {
          "Fn::FindInMap": [
            "AWSRegion2AMI",
            {
              "Ref": "AWS::Region"
            },
            "64"
          ]
        },
        "InstanceType": {
          "Ref": "PrivateInstanceType"
        },
        "IamInstanceProfile": {
          "Ref": "EC2InstanceProfile"
        },
        "UserData": {
          "Fn::Base64": {
            "Fn::Join": [
              "",
              [
                "#!/bin/bash\n",
                "yum update -y\n",
                "yum install -y ecs-init\n",
                "yum install -y docker\n",
                "sed -i  '1s/^/nameserver 10.1.64.15\\nnameserver 10.253.34.15\\n/' /etc/resolv.conf\n",
                "mkfs -t ext4 /dev/`lsblk  | grep 200G | grep xvd | awk '{print$1}'`\n",
                "mkdir -p /opt/data\n",
                "chmod -R 777 /opt/data\n",
                "cp /etc/fstab /etc/fstab.orig\n",
                "echo /dev/`lsblk  | grep 200G | grep xvd | awk '{print$1}'` /opt/data/ ext4 defaults, nofail 0 2  >> /etc/fstab\n",
                "mount -a\n",
                "echo ECS_CLUSTER=",
                {
                  "Ref": "ECSPrivateClusterSolrMaster"
                },
                " > /etc/ecs/ecs.config\n",
                "service docker restart\n",
                "start ecs\n"
              ]
            ]
          }
        },
        "InstanceMonitoring": "false",
        "KeyName": {
          "Ref": "KeyName"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "BlockDeviceMappings": [
          {
            "DeviceName": "/dev/xvda",
            "Ebs": {
              "VolumeSize": "100",
              "VolumeType": "io1",
              "Iops": 500
            }
          },
          {
            "DeviceName": "/dev/xvdb",
            "Ebs": {
              "DeleteOnTermination": "false",
              "VolumeSize": "200",
              "VolumeType": "io1",
              "Iops": 500
            }
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "c78c9a58-4213-4a7b-80f2-cae1f37d8e4d"
        }
      }
    },
    "LaunchConfigMongoReplica1": {
      "Type": "AWS::AutoScaling::LaunchConfiguration",
      "Properties": {
        "ImageId": {
          "Fn::FindInMap": [
            "AWSRegion2AMI",
            {
              "Ref": "AWS::Region"
            },
            "64"
          ]
        },
        "InstanceType": {
          "Ref": "PrivateInstanceType"
        },
        "IamInstanceProfile": {
          "Ref": "EC2InstanceProfile"
        },
        "UserData": {
          "Fn::Base64": {
            "Fn::Join": [
              "",
              [
                "#!/bin/bash\n",
                "yum update -y\n",
                "yum install -y ecs-init\n",
                "yum install -y docker\n",
                "sed -i  '1s/^/nameserver 10.1.64.15\\nnameserver 10.253.34.15\\n/' /etc/resolv.conf\n",
                "mkfs -t ext4 /dev/`lsblk  | grep 200G | grep xvd | awk '{print$1}'`\n",
                "mkdir -p /opt/mongodb\n",
                "chmod -R 777 /opt/mongodb\n",
                "cp /etc/fstab /etc/fstab.orig\n",
                "echo /dev/`lsblk  | grep 200G | grep xvd | awk '{print$1}'` /opt/mongodb/ ext4 defaults, nofail 0 2  >> /etc/fstab\n",
                "mount -a\n",
                "echo ECS_CLUSTER=",
                {
                  "Ref": "ECSPrivateClusterMongoReplica1"
                },
                " > /etc/ecs/ecs.config\n",
                "service docker restart\n",
                "start ecs\n"
              ]
            ]
          }
        },
        "InstanceMonitoring": "false",
        "KeyName": {
          "Ref": "KeyName"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "BlockDeviceMappings": [
          {
            "DeviceName": "/dev/xvda",
            "Ebs": {
              "VolumeSize": "100",
              "VolumeType": "io1",
              "Iops": 500
            }
          },
          {
            "DeviceName": "/dev/xvdb",
            "Ebs": {
              "DeleteOnTermination": "false",
              "VolumeSize": "200",
              "VolumeType": "io1",
              "Iops": 500
            }
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "56830cfb-8602-43c3-8e11-3710679b93ad"
        }
      }
    },
    "LaunchConfigMongoReplica2": {
      "Type": "AWS::AutoScaling::LaunchConfiguration",
      "Properties": {
        "ImageId": {
          "Fn::FindInMap": [
            "AWSRegion2AMI",
            {
              "Ref": "AWS::Region"
            },
            "64"
          ]
        },
        "InstanceType": {
          "Ref": "PrivateInstanceType"
        },
        "IamInstanceProfile": {
          "Ref": "EC2InstanceProfile"
        },
        "UserData": {
          "Fn::Base64": {
            "Fn::Join": [
              "",
              [
                "#!/bin/bash\n",
                "yum update -y\n",
                "yum install -y ecs-init\n",
                "yum install -y docker\n",
                "sed -i  '1s/^/nameserver 10.1.64.15\\nnameserver 10.253.34.15\\n/' /etc/resolv.conf\n",
                "mkfs -t ext4 /dev/`lsblk  | grep 200G | grep xvd | awk '{print$1}'`\n",
                "mkdir -p /opt/mongodb\n",
                "chmod -R 777 /opt/mongodb\n",
                "cp /etc/fstab /etc/fstab.orig\n",
                "echo /dev/`lsblk  | grep 200G | grep xvd | awk '{print$1}'` /opt/mongodb/ ext4 defaults, nofail 0 2  >> /etc/fstab\n",
                "mount -a\n",
                "echo ECS_CLUSTER=",
                {
                  "Ref": "ECSPrivateClusterMongoReplica2"
                },
                " > /etc/ecs/ecs.config\n",
                "service docker restart\n",
                "start ecs\n"
              ]
            ]
          }
        },
        "InstanceMonitoring": "false",
        "KeyName": {
          "Ref": "KeyName"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "BlockDeviceMappings": [
          {
            "DeviceName": "/dev/xvda",
            "Ebs": {
              "VolumeSize": "100",
              "VolumeType": "io1",
              "Iops": 500
            }
          },
          {
            "DeviceName": "/dev/xvdb",
            "Ebs": {
              "DeleteOnTermination": "false",
              "VolumeSize": "200",
              "VolumeType": "io1",
              "Iops": 500
            }
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "4d2ad65c-fb21-44a1-8715-733926e364d2"
        }
      }
    },
    "ScaleUpPolicyPrivate": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingPrivateGroup"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "801b6a05-d510-42a1-b9ac-915bb2fa4ee8"
        }
      }
    },
    "ScaleDownPolicyPrivate": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingPrivateGroup"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "-1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "3e7c3783-aa83-46c2-aed3-68ff38e5e89e"
        }
      }
    },
    "ScaleUpPolicyPublic": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingPublicGroup"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "8f740cd3-f49c-4c3b-bd19-e2fe4406cb3c"
        }
      }
    },
    "ScaleDownPolicyPublic": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingPublicGroup"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "-1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "36f06beb-5ba3-4296-b1fb-27262d642e44"
        }
      }
    },
    "ScaleUpPolicySolrSlave": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingSolrSlaveGroup"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "a0307688-e8e6-42a9-90fe-9605f8f6bfb2"
        }
      }
    },
    "ScaleDownPolicySolrSlave": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingSolrSlaveGroup"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "-1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "981e972f-f383-4f50-8345-a2159eea54f1"
        }
      }
    },
    "ScaleUpPolicySolrGlobalNutch": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingSolrGlobalNutchGroup"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "186ea553-28d7-4986-a5c1-3a8acc13ac03"
        }
      }
    },
    "ScaleDownPolicySolrGlobalNutch": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingSolrGlobalNutchGroup"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "-1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "969f8019-d591-4375-bff2-4e33d162e457"
        }
      }
    },
    "ScaleUpPolicySolrBURNutch": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingSolrBURNutchGroup"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "d3c7f1b4-7656-48e6-bd7c-27fbc34031be"
        }
      }
    },
    "ScaleDownPolicySolrBURNutch": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingSolrBURNutchGroup"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "-1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "4b31d8ce-39fe-435c-95d7-7c71844acac9"
        }
      }
    },
    "ScaleUpPolicyMongoReplica1": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingMongoReplica1Group"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "758ce8df-24a1-4a8f-813d-a706e9de29f3"
        }
      }
    },
    "ScaleDownPolicyMongoReplica1": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingMongoReplica1Group"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "-1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "05b0f9f4-46ac-4e0e-9830-2429eecb6036"
        }
      }
    },
    "ScaleUpPolicyMongoReplica2": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingMongoReplica2Group"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "d269d58e-183b-45b5-9486-4d3a30a95839"
        }
      }
    },
    "ScaleDownPolicyMongoReplica2": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingMongoReplica2Group"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "-1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "2699d875-257d-4a53-8eb3-5fe697d8874b"
        }
      }
    },
    "ScaleUpPolicySolrMaster": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingSolrMasterGroup"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "1e368aab-59f3-4669-a9e8-b59d557f5cd3"
        }
      }
    },
    "ScaleDownPolicySolrMaster": {
      "Type": "AWS::AutoScaling::ScalingPolicy",
      "Properties": {
        "AdjustmentType": "ChangeInCapacity",
        "AutoScalingGroupName": {
          "Ref": "AutoscalingSolrMasterGroup"
        },
        "Cooldown": "300",
        "ScalingAdjustment": "-1"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "79b340d7-5225-47f9-9d54-bb6b68c2c8db"
        }
      }
    },
    "CPUAlarmHighPrivate": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU Reserved > 80% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPUHighThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleUpPolicyPrivate"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateCluster"
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "65c3bf3e-65a3-46fe-a516-d53c38b5963a"
        }
      }
    },
    "CPUAlarmLowPrivate": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU Reserved < 60% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPULowThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleDownPolicyPrivate"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateCluster"
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "b49a44f4-51b9-496f-9ef6-0e887c45422a"
        }
      }
    },
    "CPUAlarmHighPublic": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU reserved > 80% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPUHighThresholdPublic"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleUpPolicyPublic"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPublicCluster"
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "46433b22-45dd-4696-a041-b2323eff25e0"
        }
      }
    },
    "CPUAlarmLowPublic": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU reserved < 60% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPULowThresholdPublic"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleDownPolicyPublic"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPublicCluster"
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "158c87f3-2abe-456b-a4e7-6ce1f57fbdca"
        }
      }
    },
    "CPUAlarmHighPrivateSolrSlave": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU Reserved > 80% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPUHighThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleUpPolicySolrSlave"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrSlave"
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "b891d05f-2de3-4f34-b316-a95709cce3ea"
        }
      }
    },
    "CPUAlarmLowPrivateSolrSlave": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU Reserved < 60% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPULowThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleDownPolicySolrSlave"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrSlave"
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "629f8a30-1191-4b16-a04c-a1f27599d0c3"
        }
      }
    },
    "CPUAlarmHighPrivateSolrGlobalNutch": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU Reserved > 80% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPUHighThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleUpPolicySolrGlobalNutch"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrGlobalNutch"
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "042884b0-8172-4c8c-9058-4741837ff612"
        }
      }
    },
    "CPUAlarmLowPrivateSolrGlobalNutch": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU Reserved < 60% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPULowThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleDownPolicySolrGlobalNutch"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrGlobalNutch"
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "0316109e-d723-46ff-8648-e1ff1c92fe46"
        }
      }
    },
    "CPUAlarmHighPrivateSolrBURNutch": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU Reserved > 80% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPUHighThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleUpPolicySolrBURNutch"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrBURNutch"
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "1f7822f5-ecef-42c6-aaf3-7ca0bb6aa0fd"
        }
      }
    },
    "CPUAlarmLowPrivateSolrBURNutch": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU Reserved < 60% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPULowThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleDownPolicySolrBURNutch"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrBURNutch"
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "9b3fda2a-79f0-4514-9a61-e29ddabde122"
        }
      }
    },
    "CPUAlarmHighPrivateSolrMaster": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU Reserved > 80% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPUHighThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleUpPolicySolrMaster"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrMaster"
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "31b45745-ac23-4359-b0a4-f07c4169ed18"
        }
      }
    },
    "CPUAlarmLowPrivateSolrMaster": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU Reserved < 60% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPULowThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleDownPolicySolrMaster"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrMaster"
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "0842f621-8ab2-4ca1-9dc2-79cebbc9cd40"
        }
      }
    },
    "CPUAlarmHighPrivateMongoReplica1": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU Reserved > 80% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPUHighThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleUpPolicyMongoReplica1"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterMongoReplica1"
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "9c8ad95f-7dcf-4bed-879c-8f65a2bd7db0"
        }
      }
    },
    "CPUAlarmLowPrivateMongoReplica1": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU Reserved < 60% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPULowThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleDownPolicyMongoReplica1"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterMongoReplica1"
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "3dfceb1d-56cd-491b-9a34-0490a7aa3019"
        }
      }
    },
    "CPUAlarmHighPrivateMongoReplica2": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU Reserved > 80% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPUHighThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleUpPolicyMongoReplica2"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterMongoReplica2"
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "eec3cc40-1b60-46a3-b765-12356e7f3023"
        }
      }
    },
    "CPUAlarmLowPrivateMongoReplica2": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU Reserved < 60% for 5 minutes",
        "MetricName": "CPUReservation",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "CPULowThresholdPrivate"
        },
        "AlarmActions": [
          {
            "Ref": "ScaleDownPolicyMongoReplica2"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterMongoReplica2"
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "0c04605a-ec55-4de3-bb8d-69bacaef862b"
        }
      }
    },
    "LiferayTask": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "ContainerDefinitions": [
          {
            "Name": "data",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/",
                  {
                    "Ref": "ConfigEnv"
                  }
                ]
              ]
            },
            "Memory": 128,
            "Essential": "false"
          },
          {
            "Name": "Liferay",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/liferay",
                  ":",
                  {
                    "Ref": "LiferayImageVersion"
                  }
                ]
              ]
            },
            "Cpu": {
              "Ref": "LiferayCpu"
            },
            "PortMappings": [
              {
                "ContainerPort": {
                  "Ref": "LiferayContainerPort"
                }
              }
            ],
            "Memory": {
              "Ref": "LiferayMemory"
            },
            "Essential": "true",
            "VolumesFrom": [
              {
                "SourceContainer": "data"
              }
            ]
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "d26c1fee-fa3a-431f-bbe5-72febd80a21e"
        }
      }
    },
    "LiferayELB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Scheme": "internal",
        "Subnets": {
          "Ref": "PublicSubnets"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "LoadBalancerAttributes": [
          {
            "Key": "idle_timeout.timeout_seconds",
            "Value": "50"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "fc3ace3c-fa0f-433b-b977-c028fe7cdea0"
        }
      }
    },
    "LiferayELBTarget": {
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
      "Properties": {
        "HealthCheckIntervalSeconds": 300,
        "HealthCheckPath": "/",
        "HealthCheckProtocol": "HTTP",
        "HealthCheckTimeoutSeconds": 60,
        "HealthyThresholdCount": 5,
        "Matcher": {
          "HttpCode": "301"
        },
        "Port": 5000,
        "Protocol": "HTTP",
        "UnhealthyThresholdCount": 4,
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "bc1815e1-8554-4a9c-8f13-a3f7294b5bce"
        }
      }
    },
    "LiferayListener": {
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
      "Properties": {
        "DefaultActions": [
          {
            "Type": "forward",
            "TargetGroupArn": {
              "Ref": "LiferayELBTarget"
            }
          }
        ],
        "LoadBalancerArn": {
          "Ref": "LiferayELB"
        },
        "Port": "80",
        "Protocol": "HTTP"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "735f97a9-769d-4942-bec1-feea1c87aad8"
        }
      }
    },
    "LiferayService": {
      "Type": "AWS::ECS::Service",
      "DependsOn": [
        "LiferayELB",
        "LiferayListener"
      ],
      "Properties": {
        "Role": {
          "Ref": "ECSServiceRole"
        },
        "TaskDefinition": {
          "Ref": "LiferayTask"
        },
        "DesiredCount": {
          "Ref": "MinLiferaySize"
        },
        "LoadBalancers": [
          {
            "ContainerPort": {
              "Ref": "LiferayContainerPort"
            },
            "ContainerName": "Liferay",
            "TargetGroupArn": {
              "Ref": "LiferayELBTarget"
            }
          }
        ],
        "Cluster": {
          "Ref": "ECSPrivateCluster"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "2e20c3ef-bdcc-4403-8ccd-e68b66b6dbe9"
        }
      }
    },
    "ECSAutoscaleRole": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "RoleName": "ecsAutoscaleRole",
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "application-autoscaling.amazonaws.com"
                ]
              },
              "Action": [
                "sts:AssumeRole"
              ]
            }
          ]
        },
        "Path": "/",
        "Policies": [
          {
            "PolicyName": "AmazonEC2ContainerServiceAutoscale",
            "PolicyDocument": {
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "application-autoscaling:*",
                    "cloudwatch:DescribeAlarms",
                    "cloudwatch:PutMetricAlarm",
                    "ecs:DescribeServices",
                    "ecs:UpdateService"
                  ],
                  "Resource": "*"
                }
              ]
            }
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "902fb76d-5c61-4bd3-b2a2-40d81681c1e2"
        }
      }
    },
    "LiferayscalableTarget": {
      "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
      "Properties": {
        "MaxCapacity": {
          "Ref": "MaxLiferaySize"
        },
        "MinCapacity": {
          "Ref": "MinLiferaySize"
        },
        "ResourceId": {
          "Fn::Join": [
            "",
            [
              "service/",
              {
                "Ref": "ECSPrivateCluster"
              },
              "/",
              {
                "Fn::GetAtt": [
                  "LiferayService",
                  "Name"
                ]
              }
            ]
          ]
        },
        "RoleARN": {
          "Fn::GetAtt": [
            "ECSAutoscaleRole",
            "Arn"
          ]
        },
        "ScalableDimension": "ecs:service:DesiredCount",
        "ServiceNamespace": "ecs"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "c7d7348d-1169-457b-bcdc-ee2be98c9b92"
        }
      }
    },
    "LiferayScaleUpPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "LiferayScaleUp",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "LiferayscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalLowerBound": 0,
              "ScalingAdjustment": 1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "55412ca8-74f8-4a65-980a-f05e91628633"
        }
      }
    },
    "LiferayScaleDownPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "LiferayScaleDown",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "LiferayscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalUpperBound": 0,
              "ScalingAdjustment": -1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "00495e64-be8b-48b4-a148-af1b19bd8f00"
        }
      }
    },
    "LiferayCPUAlarmHigh": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU > 80% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPUHighThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "LiferayScaleUpPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateCluster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "LiferayService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "92beec4c-e8ea-4354-8722-1c80a5da9f27"
        }
      }
    },
    "LiferayCPUAlarmLow": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU < 60% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPULowThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "LiferayScaleDownPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateCluster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "LiferayService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "db584c00-0ebd-48d1-b769-45eac818bc57"
        }
      }
    },
    "BodybeastTask": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "ContainerDefinitions": [
          {
            "Name": "data",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/",
                  {
                    "Ref": "ConfigEnv"
                  }
                ]
              ]
            },
            "Memory": 128,
            "Essential": "false"
          },
          {
            "Name": "Bodybeast",
            "Environment": [
              {
                "Name": "SERVICE_NAME",
                "Value": "bodybeast"
              }
            ],
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/bodybeast",
                  ":",
                  {
                    "Ref": "BodybeastImageVersion"
                  }
                ]
              ]
            },
            "Cpu": {
              "Ref": "BodybeastCpu"
            },
            "PortMappings": [
              {
                "ContainerPort": {
                  "Ref": "BodybeastContainerPort"
                }
              }
            ],
            "Memory": {
              "Ref": "BodybeastMemory"
            },
            "Essential": "true",
            "VolumesFrom": [
              {
                "SourceContainer": "data"
              }
            ]
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "df8b69b9-87fc-42c2-a758-344326752d27"
        }
      }
    },
    "BodybeastELB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Scheme": "internal",
        "Subnets": {
          "Ref": "PublicSubnets"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "LoadBalancerAttributes": [
          {
            "Key": "idle_timeout.timeout_seconds",
            "Value": "50"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "0a7b11c3-96a3-4101-8bad-a812a347d64c"
        }
      }
    },
    "BodybeastELBTarget": {
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
      "Properties": {
        "HealthCheckIntervalSeconds": 300,
        "HealthCheckPath": "/bodybeast-services/",
        "HealthCheckProtocol": "HTTP",
        "HealthCheckTimeoutSeconds": 60,
        "HealthyThresholdCount": 5,
        "Matcher": {
          "HttpCode": "200"
        },
        "Port": 5000,
        "Protocol": "HTTP",
        "UnhealthyThresholdCount": 4,
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "715d5c36-5e9d-429a-a808-02eb5f35b34e"
        }
      }
    },
    "BodybeastListener": {
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
      "Properties": {
        "DefaultActions": [
          {
            "Type": "forward",
            "TargetGroupArn": {
              "Ref": "BodybeastELBTarget"
            }
          }
        ],
        "LoadBalancerArn": {
          "Ref": "BodybeastELB"
        },
        "Port": "80",
        "Protocol": "HTTP"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "401475b2-32fe-4cd3-9d15-58f233f6b6e6"
        }
      }
    },
    "BodybeastService": {
      "Type": "AWS::ECS::Service",
      "DependsOn": [
        "BodybeastELB",
        "BodybeastListener"
      ],
      "Properties": {
        "Role": {
          "Ref": "ECSServiceRole"
        },
        "TaskDefinition": {
          "Ref": "BodybeastTask"
        },
        "DesiredCount": {
          "Ref": "MinBodybeastSize"
        },
        "LoadBalancers": [
          {
            "ContainerPort": {
              "Ref": "BodybeastContainerPort"
            },
            "ContainerName": "Bodybeast",
            "TargetGroupArn": {
              "Ref": "BodybeastELBTarget"
            }
          }
        ],
        "Cluster": {
          "Ref": "ECSPrivateCluster"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "bde57f82-3f46-403e-9fd5-3ac3130bb7f6"
        }
      }
    },
    "BodybeastscalableTarget": {
      "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
      "Properties": {
        "MaxCapacity": {
          "Ref": "MaxBodybeastSize"
        },
        "MinCapacity": {
          "Ref": "MinBodybeastSize"
        },
        "ResourceId": {
          "Fn::Join": [
            "",
            [
              "service/",
              {
                "Ref": "ECSPrivateCluster"
              },
              "/",
              {
                "Fn::GetAtt": [
                  "BodybeastService",
                  "Name"
                ]
              }
            ]
          ]
        },
        "RoleARN": {
          "Fn::GetAtt": [
            "ECSAutoscaleRole",
            "Arn"
          ]
        },
        "ScalableDimension": "ecs:service:DesiredCount",
        "ServiceNamespace": "ecs"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "af689f39-6268-42a2-8729-8c78dab75645"
        }
      }
    },
    "BodybeastScaleUpPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "BodybeastScaleUp",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "BodybeastscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalLowerBound": 0,
              "ScalingAdjustment": 1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "74ddac39-9bb8-41f5-9e25-8942c3ab1a7e"
        }
      }
    },
    "BodybeastScaleDownPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "BodybeastScaleDown",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "BodybeastscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalUpperBound": 0,
              "ScalingAdjustment": -1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "7f6f66aa-d257-4472-aaa2-382dd9546705"
        }
      }
    },
    "BodybeastCPUAlarmHigh": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU > 80% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPUHighThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "BodybeastScaleUpPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateCluster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "BodybeastService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "866bbab6-79a8-402d-b067-b9b30ee431cb"
        }
      }
    },
    "BodybeastCPUAlarmLow": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU < 60% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPULowThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "BodybeastScaleDownPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateCluster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "BodybeastService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "279367a3-4f7f-4714-b54e-f3d12139c375"
        }
      }
    },
    "CertificationTask": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "ContainerDefinitions": [
          {
            "Name": "data",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/",
                  {
                    "Ref": "ConfigEnv"
                  }
                ]
              ]
            },
            "Memory": 128,
            "Essential": "false"
          },
          {
            "Name": "Certification",
            "Environment": [
              {
                "Name": "SERVICE_NAME",
                "Value": "certification"
              }
            ],
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/certification",
                  ":",
                  {
                    "Ref": "CertificationImageVersion"
                  }
                ]
              ]
            },
            "Cpu": {
              "Ref": "CertificationCpu"
            },
            "PortMappings": [
              {
                "ContainerPort": {
                  "Ref": "CertificationContainerPort"
                }
              }
            ],
            "Memory": {
              "Ref": "CertificationMemory"
            },
            "Essential": "true",
            "VolumesFrom": [
              {
                "SourceContainer": "data"
              }
            ]
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "1cab38b8-b4ea-47d1-a30a-e8b90f982c17"
        }
      }
    },
    "CertificationELB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Scheme": "internal",
        "Subnets": {
          "Ref": "PublicSubnets"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "LoadBalancerAttributes": [
          {
            "Key": "idle_timeout.timeout_seconds",
            "Value": "50"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f7d96f4d-b7b3-45c7-a5f0-c00f68ad094b"
        }
      }
    },
    "CertificationELBTarget": {
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
      "Properties": {
        "HealthCheckIntervalSeconds": 300,
        "HealthCheckPath": "/certification-web/restapi/",
        "HealthCheckProtocol": "HTTP",
        "HealthCheckTimeoutSeconds": 60,
        "HealthyThresholdCount": 5,
        "Matcher": {
          "HttpCode": "200"
        },
        "Port": 5000,
        "Protocol": "HTTP",
        "UnhealthyThresholdCount": 4,
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "37dc69aa-3efe-434a-b01d-287b29e251aa"
        }
      }
    },
    "CertificationListener": {
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
      "Properties": {
        "DefaultActions": [
          {
            "Type": "forward",
            "TargetGroupArn": {
              "Ref": "CertificationELBTarget"
            }
          }
        ],
        "LoadBalancerArn": {
          "Ref": "CertificationELB"
        },
        "Port": "80",
        "Protocol": "HTTP"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "e9a81617-9178-4a9f-9f7d-207e149072f1"
        }
      }
    },
    "CertificationService": {
      "Type": "AWS::ECS::Service",
      "DependsOn": [
        "CertificationELB",
        "CertificationListener"
      ],
      "Properties": {
        "Role": {
          "Ref": "ECSServiceRole"
        },
        "TaskDefinition": {
          "Ref": "CertificationTask"
        },
        "DesiredCount": {
          "Ref": "MinCertificationSize"
        },
        "LoadBalancers": [
          {
            "ContainerPort": {
              "Ref": "CertificationContainerPort"
            },
            "ContainerName": "Certification",
            "TargetGroupArn": {
              "Ref": "CertificationELBTarget"
            }
          }
        ],
        "Cluster": {
          "Ref": "ECSPrivateCluster"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "71a5a67d-e8f6-43c1-b45b-bb479fc7b77b"
        }
      }
    },
    "CertificationscalableTarget": {
      "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
      "Properties": {
        "MaxCapacity": {
          "Ref": "MaxCertificationSize"
        },
        "MinCapacity": {
          "Ref": "MinCertificationSize"
        },
        "ResourceId": {
          "Fn::Join": [
            "",
            [
              "service/",
              {
                "Ref": "ECSPrivateCluster"
              },
              "/",
              {
                "Fn::GetAtt": [
                  "CertificationService",
                  "Name"
                ]
              }
            ]
          ]
        },
        "RoleARN": {
          "Fn::GetAtt": [
            "ECSAutoscaleRole",
            "Arn"
          ]
        },
        "ScalableDimension": "ecs:service:DesiredCount",
        "ServiceNamespace": "ecs"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "90358f0c-cc54-40c6-9428-0cd220d812e8"
        }
      }
    },
    "CertificationScaleUpPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "CertificationScaleUp",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "CertificationscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalLowerBound": 0,
              "ScalingAdjustment": 1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "64de393a-14d9-494d-b30c-1c63230aaca6"
        }
      }
    },
    "CertificationScaleDownPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "CertificationScaleDown",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "CertificationscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalUpperBound": 0,
              "ScalingAdjustment": -1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "62aba032-8334-4ca8-98ee-64933d8b6a43"
        }
      }
    },
    "CertificationCPUAlarmHigh": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU > 80% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPUHighThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "CertificationScaleUpPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateCluster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "CertificationService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "99962573-bc90-4daa-8a72-68e983fe6cf1"
        }
      }
    },
    "CertificationCPUAlarmLow": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU < 60% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPULowThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "CertificationScaleDownPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateCluster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "CertificationService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "0c7f31f1-44b4-4de0-bdd2-f1d1f745356c"
        }
      }
    },
    "GeneralTask": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "ContainerDefinitions": [
          {
            "Name": "data",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/",
                  {
                    "Ref": "ConfigEnv"
                  }
                ]
              ]
            },
            "Memory": 128,
            "Essential": "false"
          },
          {
            "Name": "General",
            "Environment": [
              {
                "Name": "SERVICE_NAME",
                "Value": "general"
              }
            ],
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/general",
                  ":",
                  {
                    "Ref": "GeneralImageVersion"
                  }
                ]
              ]
            },
            "Cpu": {
              "Ref": "GeneralCpu"
            },
            "PortMappings": [
              {
                "ContainerPort": {
                  "Ref": "GeneralContainerPort"
                }
              }
            ],
            "Memory": {
              "Ref": "GeneralMemory"
            },
            "Essential": "true",
            "VolumesFrom": [
              {
                "SourceContainer": "data"
              }
            ]
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "5afc11f9-2486-4388-ae33-3e450b2e4798"
        }
      }
    },
    "GeneralELB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Scheme": "internal",
        "Subnets": {
          "Ref": "PublicSubnets"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "LoadBalancerAttributes": [
          {
            "Key": "idle_timeout.timeout_seconds",
            "Value": "50"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "94507ee7-314d-493c-a69a-fb6b391cbcbc"
        }
      }
    },
    "GeneralELBTarget": {
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
      "Properties": {
        "HealthCheckIntervalSeconds": 300,
        "HealthCheckPath": "/general-web/restapi/",
        "HealthCheckProtocol": "HTTP",
        "HealthCheckTimeoutSeconds": 60,
        "HealthyThresholdCount": 5,
        "Matcher": {
          "HttpCode": "200"
        },
        "Port": 5000,
        "Protocol": "HTTP",
        "UnhealthyThresholdCount": 4,
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "aaeeb95c-b92e-4b2c-a5bd-7e939bc04ff9"
        }
      }
    },
    "GeneralListener": {
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
      "Properties": {
        "DefaultActions": [
          {
            "Type": "forward",
            "TargetGroupArn": {
              "Ref": "GeneralELBTarget"
            }
          }
        ],
        "LoadBalancerArn": {
          "Ref": "GeneralELB"
        },
        "Port": "80",
        "Protocol": "HTTP"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "0e1bb785-c6ea-418c-a0bd-e7b33cfac67e"
        }
      }
    },
    "GeneralService": {
      "Type": "AWS::ECS::Service",
      "DependsOn": [
        "GeneralELB",
        "GeneralListener"
      ],
      "Properties": {
        "Role": {
          "Ref": "ECSServiceRole"
        },
        "TaskDefinition": {
          "Ref": "GeneralTask"
        },
        "DesiredCount": {
          "Ref": "MinGeneralSize"
        },
        "LoadBalancers": [
          {
            "ContainerPort": {
              "Ref": "GeneralContainerPort"
            },
            "ContainerName": "General",
            "TargetGroupArn": {
              "Ref": "GeneralELBTarget"
            }
          }
        ],
        "Cluster": {
          "Ref": "ECSPrivateCluster"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "2f95f49a-385f-40c8-bec1-1e0e19e86974"
        }
      }
    },
    "GeneralscalableTarget": {
      "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
      "Properties": {
        "MaxCapacity": {
          "Ref": "MaxGeneralSize"
        },
        "MinCapacity": {
          "Ref": "MinGeneralSize"
        },
        "ResourceId": {
          "Fn::Join": [
            "",
            [
              "service/",
              {
                "Ref": "ECSPrivateCluster"
              },
              "/",
              {
                "Fn::GetAtt": [
                  "GeneralService",
                  "Name"
                ]
              }
            ]
          ]
        },
        "RoleARN": {
          "Fn::GetAtt": [
            "ECSAutoscaleRole",
            "Arn"
          ]
        },
        "ScalableDimension": "ecs:service:DesiredCount",
        "ServiceNamespace": "ecs"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "6b90f25a-b5fb-4040-9837-057184861c0f"
        }
      }
    },
    "GeneralScaleUpPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "GeneralScaleUp",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "GeneralscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalLowerBound": 0,
              "ScalingAdjustment": 1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "8ec18700-ac2e-4f8c-9bc6-389ba6fbcdcd"
        }
      }
    },
    "GeneralScaleDownPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "GeneralScaleDown",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "GeneralscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalUpperBound": 0,
              "ScalingAdjustment": -1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "a08ea95e-fe14-4289-9430-0b1d9b1865cc"
        }
      }
    },
    "GeneralCPUAlarmHigh": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU > 80% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPUHighThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "GeneralScaleUpPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateCluster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "GeneralService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "317fab7d-edce-4581-87ff-01310fa2a5ab"
        }
      }
    },
    "GeneralCPUAlarmLow": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU < 60% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPULowThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "GeneralScaleDownPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateCluster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "GeneralService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "7018f656-fbd3-45f5-8b20-c34e42251813"
        }
      }
    },
    "AutoprocTask": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "ContainerDefinitions": [
          {
            "Name": "data",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/",
                  {
                    "Ref": "ConfigEnv"
                  }
                ]
              ]
            },
            "Memory": 128,
            "Essential": "false"
          },
          {
            "Name": "Autoproc",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/autoproc",
                  ":",
                  {
                    "Ref": "AutoprocImageVersion"
                  }
                ]
              ]
            },
            "Cpu": {
              "Ref": "AutoprocCpu"
            },
            "PortMappings": [
              {
                "ContainerPort": {
                  "Ref": "AutoprocContainerPort"
                }
              }
            ],
            "Memory": {
              "Ref": "AutoprocMemory"
            },
            "Essential": "true",
            "VolumesFrom": [
              {
                "SourceContainer": "data"
              }
            ]
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "5d29f90d-a39a-441b-9f4f-4108df03707b"
        }
      }
    },
    "AutoprocELB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Scheme": "internal",
        "Subnets": {
          "Ref": "PublicSubnets"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "LoadBalancerAttributes": [
          {
            "Key": "idle_timeout.timeout_seconds",
            "Value": "50"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "ff6bb77e-0085-43f3-a8ee-b0cc0203826b"
        }
      }
    },
    "AutoprocELBTarget": {
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
      "Properties": {
        "HealthCheckIntervalSeconds": 300,
        "HealthCheckPath": "/",
        "HealthCheckProtocol": "HTTP",
        "HealthCheckTimeoutSeconds": 60,
        "HealthyThresholdCount": 5,
        "Matcher": {
          "HttpCode": "200"
        },
        "Port": 5000,
        "Protocol": "HTTP",
        "UnhealthyThresholdCount": 4,
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "5d7a7629-f94f-466d-bc81-8fcd4411900b"
        }
      }
    },
    "AutoprocListener": {
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
      "Properties": {
        "DefaultActions": [
          {
            "Type": "forward",
            "TargetGroupArn": {
              "Ref": "AutoprocELBTarget"
            }
          }
        ],
        "LoadBalancerArn": {
          "Ref": "AutoprocELB"
        },
        "Port": "80",
        "Protocol": "HTTP"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "99d94f70-c3aa-4fa8-9a48-7fb873326f35"
        }
      }
    },
    "AutoprocService": {
      "Type": "AWS::ECS::Service",
      "DependsOn": [
        "AutoprocELB",
        "AutoprocListener"
      ],
      "Properties": {
        "Role": {
          "Ref": "ECSServiceRole"
        },
        "TaskDefinition": {
          "Ref": "AutoprocTask"
        },
        "DesiredCount": {
          "Ref": "MinAutoprocSize"
        },
        "LoadBalancers": [
          {
            "ContainerPort": {
              "Ref": "AutoprocContainerPort"
            },
            "ContainerName": "Autoproc",
            "TargetGroupArn": {
              "Ref": "AutoprocELBTarget"
            }
          }
        ],
        "Cluster": {
          "Ref": "ECSPrivateCluster"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "60e38c98-adef-4ed4-aad6-b53999d49b5b"
        }
      }
    },
    "AutoprocscalableTarget": {
      "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
      "Properties": {
        "MaxCapacity": {
          "Ref": "MaxAutoprocSize"
        },
        "MinCapacity": {
          "Ref": "MinAutoprocSize"
        },
        "ResourceId": {
          "Fn::Join": [
            "",
            [
              "service/",
              {
                "Ref": "ECSPrivateCluster"
              },
              "/",
              {
                "Fn::GetAtt": [
                  "AutoprocService",
                  "Name"
                ]
              }
            ]
          ]
        },
        "RoleARN": {
          "Fn::GetAtt": [
            "ECSAutoscaleRole",
            "Arn"
          ]
        },
        "ScalableDimension": "ecs:service:DesiredCount",
        "ServiceNamespace": "ecs"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "88f43645-b841-437c-a43b-73eeb4c0b31d"
        }
      }
    },
    "AutoprocScaleUpPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "AutoprocScaleUp",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "AutoprocscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalLowerBound": 0,
              "ScalingAdjustment": 1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "9d0ccc48-5b93-431c-989f-18fdd1178df4"
        }
      }
    },
    "AutoprocScaleDownPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "AutoprocScaleDown",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "AutoprocscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalUpperBound": 0,
              "ScalingAdjustment": -1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "6165c4a1-1b5d-40a3-983e-038db0ed0362"
        }
      }
    },
    "AutoprocCPUAlarmHigh": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU > 80% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPUHighThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "AutoprocScaleUpPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateCluster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "AutoprocService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "65b169c8-1f11-4d03-b635-0f0ee9f2e214"
        }
      }
    },
    "AutoprocCPUAlarmLow": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU < 60% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPULowThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "AutoprocScaleDownPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateCluster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "AutoprocService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "ad2e1010-5ee1-4633-97fd-41394f83f826"
        }
      }
    },
    "SolrMasterTask": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "Volumes": [
          {
            "Host": {
              "SourcePath": "/opt/data/"
            },
            "Name": "data"
          }
        ],
        "ContainerDefinitions": [
          {
            "Name": "data",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/",
                  {
                    "Ref": "ConfigEnv"
                  }
                ]
              ]
            },
            "Memory": 128,
            "Essential": "false"
          },
          {
            "Name": "SolrMaster",
            "Environment": [
              {
                "Name": "NODE_TYPE",
                "Value": "MASTER"
              }
            ],
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/solr",
                  ":",
                  {
                    "Ref": "SolrImageVersion"
                  }
                ]
              ]
            },
            "Cpu": {
              "Ref": "SolrCpu"
            },
            "PortMappings": [
              {
                "ContainerPort": {
                  "Ref": "SolrContainerPort"
                }
              }
            ],
            "Memory": {
              "Ref": "SolrMemory"
            },
            "Essential": "true",
            "MountPoints": [
              {
                "SourceVolume": "data",
                "ContainerPath": "/opt/data"
              }
            ],
            "VolumesFrom": [
              {
                "SourceContainer": "data"
              }
            ]
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "a6093232-3f4f-4d35-a36c-cb3507fc0636"
        }
      }
    },
    "SolrMasterELB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Scheme": "internal",
        "Subnets": {
          "Ref": "PublicSubnets"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "LoadBalancerAttributes": [
          {
            "Key": "idle_timeout.timeout_seconds",
            "Value": "50"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "25fdb4f6-d70b-45db-a1a6-b2b48bf64de0"
        }
      }
    },
    "SolrMasterELBTarget": {
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
      "Properties": {
        "HealthCheckIntervalSeconds": 300,
        "HealthCheckPath": "/solr/",
        "HealthCheckProtocol": "HTTP",
        "HealthCheckTimeoutSeconds": 60,
        "HealthyThresholdCount": 5,
        "Matcher": {
          "HttpCode": "200"
        },
        "Port": 5000,
        "Protocol": "HTTP",
        "UnhealthyThresholdCount": 4,
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "e22c5a63-24da-4923-aca1-bcaff94a5ec2"
        }
      }
    },
    "SolrMasterListener": {
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
      "Properties": {
        "DefaultActions": [
          {
            "Type": "forward",
            "TargetGroupArn": {
              "Ref": "SolrMasterELBTarget"
            }
          }
        ],
        "LoadBalancerArn": {
          "Ref": "SolrMasterELB"
        },
        "Port": "8983",
        "Protocol": "HTTP"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "12b67f6d-f96a-4be2-8e88-7e036f66b71a"
        }
      }
    },
    "SolrMasterService": {
      "Type": "AWS::ECS::Service",
      "DependsOn": [
        "SolrMasterELB",
        "SolrMasterListener"
      ],
      "Properties": {
        "Role": {
          "Ref": "ECSServiceRole"
        },
        "TaskDefinition": {
          "Ref": "SolrMasterTask"
        },
        "DesiredCount": 1,
        "LoadBalancers": [
          {
            "ContainerPort": {
              "Ref": "SolrContainerPort"
            },
            "ContainerName": "SolrMaster",
            "TargetGroupArn": {
              "Ref": "SolrMasterELBTarget"
            }
          }
        ],
        "Cluster": {
          "Ref": "ECSPrivateClusterSolrMaster"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "675cd568-f4f6-4660-ad27-e4ef02a4f424"
        }
      }
    },
    "SolrMasterscalableTarget": {
      "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
      "Properties": {
        "MaxCapacity": 2,
        "MinCapacity": 1,
        "ResourceId": {
          "Fn::Join": [
            "",
            [
              "service/",
              {
                "Ref": "ECSPrivateClusterSolrMaster"
              },
              "/",
              {
                "Fn::GetAtt": [
                  "SolrMasterService",
                  "Name"
                ]
              }
            ]
          ]
        },
        "RoleARN": {
          "Fn::GetAtt": [
            "ECSAutoscaleRole",
            "Arn"
          ]
        },
        "ScalableDimension": "ecs:service:DesiredCount",
        "ServiceNamespace": "ecs"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "b01fe4f4-ee8b-454f-bbe5-b95d8954d687"
        }
      }
    },
    "SolrMasterScaleUpPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "SolrMasterScaleUp",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "SolrMasterscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalLowerBound": 0,
              "ScalingAdjustment": 1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f599b8d6-62ea-44e3-97fc-8d281a737bde"
        }
      }
    },
    "SolrMasterScaleDownPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "SolrMasterScaleDown",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "SolrMasterscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalUpperBound": 0,
              "ScalingAdjustment": -1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "1b357773-1ae5-42bf-b3d2-10d61208bbb8"
        }
      }
    },
    "SolrMasterCPUAlarmHigh": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU > 80% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPUHighThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "SolrMasterScaleUpPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrMaster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "SolrMasterService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "b3737a38-a701-4837-80a8-bd8416c5cdf8"
        }
      }
    },
    "SolrMasterCPUAlarmLow": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU < 60% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPULowThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "SolrMasterScaleDownPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrMaster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "SolrMasterService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "187f9f7a-24e6-4a49-83d8-f2ab7f0e19a9"
        }
      }
    },
    "SolrSlaveTask": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "Volumes": [
          {
            "Host": {
              "SourcePath": "/opt/data/"
            },
            "Name": "data"
          }
        ],
        "ContainerDefinitions": [
          {
            "Name": "data",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/",
                  {
                    "Ref": "ConfigEnv"
                  }
                ]
              ]
            },
            "Memory": 128,
            "Essential": "false"
          },
          {
            "Name": "SolrSlave",
            "Environment": [
              {
                "Name": "NODE_TYPE",
                "Value": "SLAVE"
              },
              {
                "Name": "MASTER",
                "Value": {
                  "Ref": "SolrSlaveMasterNode"
                }
              }
            ],
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/solr",
                  ":",
                  {
                    "Ref": "SolrImageVersion"
                  }
                ]
              ]
            },
            "Cpu": {
              "Ref": "SolrCpu"
            },
            "PortMappings": [
              {
                "ContainerPort": {
                  "Ref": "SolrContainerPort"
                }
              }
            ],
            "Memory": {
              "Ref": "SolrMemory"
            },
            "Essential": "true",
            "MountPoints": [
              {
                "SourceVolume": "data",
                "ContainerPath": "/opt/data"
              }
            ],
            "VolumesFrom": [
              {
                "SourceContainer": "data"
              }
            ]
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "cccab2c4-b16b-4604-980e-883f48ed8ec3"
        }
      }
    },
    "SolrSlaveELB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Scheme": "internal",
        "Subnets": {
          "Ref": "PublicSubnets"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "LoadBalancerAttributes": [
          {
            "Key": "idle_timeout.timeout_seconds",
            "Value": "50"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "5211a6c6-9aa7-4bc2-9171-ee8b82236ba3"
        }
      }
    },
    "SolrSlaveELBTarget": {
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
      "Properties": {
        "HealthCheckIntervalSeconds": 300,
        "HealthCheckPath": "/solr/",
        "HealthCheckProtocol": "HTTP",
        "HealthCheckTimeoutSeconds": 60,
        "HealthyThresholdCount": 5,
        "Matcher": {
          "HttpCode": "200"
        },
        "Port": 5000,
        "Protocol": "HTTP",
        "UnhealthyThresholdCount": 4,
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "a36c0e8a-2a5b-4f01-8f24-7f87f9c54898"
        }
      }
    },
    "SolrSlaveListener": {
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
      "Properties": {
        "DefaultActions": [
          {
            "Type": "forward",
            "TargetGroupArn": {
              "Ref": "SolrSlaveELBTarget"
            }
          }
        ],
        "LoadBalancerArn": {
          "Ref": "SolrSlaveELB"
        },
        "Port": "8983",
        "Protocol": "HTTP"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f078d358-f4bb-4e63-b733-ee3692b0e7dc"
        }
      }
    },
    "SolrSlaveService": {
      "Type": "AWS::ECS::Service",
      "DependsOn": [
        "SolrSlaveELB",
        "SolrSlaveListener"
      ],
      "Properties": {
        "Role": {
          "Ref": "ECSServiceRole"
        },
        "TaskDefinition": {
          "Ref": "SolrSlaveTask"
        },
        "DesiredCount": 1,
        "LoadBalancers": [
          {
            "ContainerPort": {
              "Ref": "SolrContainerPort"
            },
            "ContainerName": "SolrSlave",
            "TargetGroupArn": {
              "Ref": "SolrSlaveELBTarget"
            }
          }
        ],
        "Cluster": {
          "Ref": "ECSPrivateClusterSolrSlave"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "5a5555ad-7a44-4fb6-a633-b006b6ee7706"
        }
      }
    },
    "SolrSlavescalableTarget": {
      "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
      "Properties": {
        "MaxCapacity": {
          "Ref": "MaxSolrSlaveSize"
        },
        "MinCapacity": {
          "Ref": "MinSolrSlaveSize"
        },
        "ResourceId": {
          "Fn::Join": [
            "",
            [
              "service/",
              {
                "Ref": "ECSPrivateClusterSolrSlave"
              },
              "/",
              {
                "Fn::GetAtt": [
                  "SolrSlaveService",
                  "Name"
                ]
              }
            ]
          ]
        },
        "RoleARN": {
          "Fn::GetAtt": [
            "ECSAutoscaleRole",
            "Arn"
          ]
        },
        "ScalableDimension": "ecs:service:DesiredCount",
        "ServiceNamespace": "ecs"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "fc83c402-44c6-4c47-8372-068ee26f3e24"
        }
      }
    },
    "SolrSlaveScaleUpPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "SolrSlaveScaleUp",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "SolrSlavescalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalLowerBound": 0,
              "ScalingAdjustment": 1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "9a1098f2-5b5c-4742-9de4-47e33a55dc1c"
        }
      }
    },
    "SolrSlaveScaleDownPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "SolrSlaveScaleDown",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "SolrSlavescalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalUpperBound": 0,
              "ScalingAdjustment": -1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "2bd35f18-59e4-4a25-b0d2-b00c574d3825"
        }
      }
    },
    "SolrSlaveCPUAlarmHigh": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU > 80% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPUHighThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "SolrSlaveScaleUpPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrSlave"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "SolrSlaveService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "9989f5a2-49d6-4ada-b118-55bc74141efb"
        }
      }
    },
    "SolrSlaveCPUAlarmLow": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU < 60% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPULowThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "SolrSlaveScaleDownPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrSlave"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "SolrSlaveService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "9568b899-a1c7-42be-a790-e6361ad43b8b"
        }
      }
    },
    "MongoReplica1Task": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "Volumes": [
          {
            "Host": {
              "SourcePath": "/opt/mongodb/"
            },
            "Name": "mongodb"
          }
        ],
        "ContainerDefinitions": [
          {
            "Name": "data",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/",
                  {
                    "Ref": "ConfigEnv"
                  }
                ]
              ]
            },
            "Memory": 128,
            "Essential": "false"
          },
          {
            "Name": "MongoReplica1",
            "Image": "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/mongo_replica:latest",
            "Cpu": "400",
            "PortMappings": [
              {
                "ContainerPort": "27017"
              }
            ],
            "Memory": "2000",
            "Essential": "true",
            "MountPoints": [
              {
                "SourceVolume": "mongodb",
                "ContainerPath": "/opt/mongodb"
              }
            ],
            "VolumesFrom": [
              {
                "SourceContainer": "data"
              }
            ]
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "50bb0f32-c043-407a-bfaf-cc92ac91df73"
        }
      }
    },
    "MongoReplica1ELB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Scheme": "internal",
        "Subnets": {
          "Ref": "PublicSubnets"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "LoadBalancerAttributes": [
          {
            "Key": "idle_timeout.timeout_seconds",
            "Value": "50"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "424bf577-21d0-4bc7-9117-1a4fe7f57a89"
        }
      }
    },
    "MongoReplica1ELBTarget": {
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
      "Properties": {
        "HealthCheckIntervalSeconds": 300,
        "HealthCheckPath": "/",
        "HealthCheckProtocol": "HTTP",
        "HealthCheckTimeoutSeconds": 60,
        "HealthyThresholdCount": 5,
        "Matcher": {
          "HttpCode": "200"
        },
        "Port": 5000,
        "Protocol": "HTTP",
        "UnhealthyThresholdCount": 4,
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "fc9af27f-8288-4203-9fdc-aa96c6e94c31"
        }
      }
    },
    "MongoReplica1Listener": {
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
      "Properties": {
        "DefaultActions": [
          {
            "Type": "forward",
            "TargetGroupArn": {
              "Ref": "MongoReplica1ELBTarget"
            }
          }
        ],
        "LoadBalancerArn": {
          "Ref": "MongoReplica1ELB"
        },
        "Port": "27017",
        "Protocol": "HTTP"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "656a59c1-9fa7-4c11-8d27-038994cbec43"
        }
      }
    },
    "MongoReplica1Service": {
      "Type": "AWS::ECS::Service",
      "DependsOn": [
        "MongoReplica1ELB",
        "MongoReplica1Listener"
      ],
      "Properties": {
        "Role": {
          "Ref": "ECSServiceRole"
        },
        "TaskDefinition": {
          "Ref": "MongoReplica1Task"
        },
        "DesiredCount": 1,
        "LoadBalancers": [
          {
            "ContainerPort": 27017,
            "ContainerName": "MongoReplica1",
            "TargetGroupArn": {
              "Ref": "MongoReplica1ELBTarget"
            }
          }
        ],
        "Cluster": {
          "Ref": "ECSPrivateClusterMongoReplica1"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "0ef4610c-fd5e-4988-9fa0-33ebe9d379c1"
        }
      }
    },
    "MongoReplica1scalableTarget": {
      "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
      "Properties": {
        "MaxCapacity": 2,
        "MinCapacity": 1,
        "ResourceId": {
          "Fn::Join": [
            "",
            [
              "service/",
              {
                "Ref": "ECSPrivateClusterMongoReplica1"
              },
              "/",
              {
                "Fn::GetAtt": [
                  "MongoReplica1Service",
                  "Name"
                ]
              }
            ]
          ]
        },
        "RoleARN": {
          "Fn::GetAtt": [
            "ECSAutoscaleRole",
            "Arn"
          ]
        },
        "ScalableDimension": "ecs:service:DesiredCount",
        "ServiceNamespace": "ecs"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f491f70e-9e57-4b49-8a61-c30fd2ae266d"
        }
      }
    },
    "MongoReplica1ScaleUpPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "MongoReplica1ScaleUp",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "MongoReplica1scalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalLowerBound": 0,
              "ScalingAdjustment": 1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f9cd3d62-f162-4ea7-a9e6-c429c60cbf63"
        }
      }
    },
    "MongoReplica1ScaleDownPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "MongoReplica1ScaleDown",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "MongoReplica1scalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalUpperBound": 0,
              "ScalingAdjustment": -1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "c1705f78-2652-4a9c-a957-5b2c7e5e3b58"
        }
      }
    },
    "MongoReplica1CPUAlarmHigh": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU > 80% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPUHighThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "MongoReplica1ScaleUpPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterMongoReplica1"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "MongoReplica1Service",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "302970ad-bf34-4fe4-bd6f-2653734773bb"
        }
      }
    },
    "MongoReplica1CPUAlarmLow": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU < 60% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPULowThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "MongoReplica1ScaleDownPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterMongoReplica1"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "MongoReplica1Service",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "70262a95-da96-4014-8a92-d6df6d4c86e4"
        }
      }
    },
    "MongoReplica2Task": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "Volumes": [
          {
            "Host": {
              "SourcePath": "/opt/mongodb/"
            },
            "Name": "mongodb"
          }
        ],
        "ContainerDefinitions": [
          {
            "Name": "data",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/",
                  {
                    "Ref": "ConfigEnv"
                  }
                ]
              ]
            },
            "Memory": 128,
            "Essential": "false"
          },
          {
            "Name": "MongoReplica2",
            "Image": "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/mongo_replica:latest",
            "Cpu": "400",
            "PortMappings": [
              {
                "ContainerPort": "27017"
              }
            ],
            "Memory": "2000",
            "Essential": "true",
            "MountPoints": [
              {
                "SourceVolume": "mongodb",
                "ContainerPath": "/opt/mongodb"
              }
            ],
            "VolumesFrom": [
              {
                "SourceContainer": "data"
              }
            ]
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "50bb0f32-c043-407a-bfaf-cc92ac91df73"
        }
      }
    },
    "MongoReplica2ELB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Scheme": "internal",
        "Subnets": {
          "Ref": "PublicSubnets"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "LoadBalancerAttributes": [
          {
            "Key": "idle_timeout.timeout_seconds",
            "Value": "50"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "424bf577-21d0-4bc7-9117-1a4fe7f57a89"
        }
      }
    },
    "MongoReplica2ELBTarget": {
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
      "Properties": {
        "HealthCheckIntervalSeconds": 300,
        "HealthCheckPath": "/",
        "HealthCheckProtocol": "HTTP",
        "HealthCheckTimeoutSeconds": 60,
        "HealthyThresholdCount": 5,
        "Matcher": {
          "HttpCode": "200"
        },
        "Port": 5000,
        "Protocol": "HTTP",
        "UnhealthyThresholdCount": 4,
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "fc9af27f-8288-4203-9fdc-aa96c6e94c31"
        }
      }
    },
    "MongoReplica2Listener": {
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
      "Properties": {
        "DefaultActions": [
          {
            "Type": "forward",
            "TargetGroupArn": {
              "Ref": "MongoReplica2ELBTarget"
            }
          }
        ],
        "LoadBalancerArn": {
          "Ref": "MongoReplica2ELB"
        },
        "Port": "27017",
        "Protocol": "HTTP"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "656a59c1-9fa7-4c11-8d27-038994cbec43"
        }
      }
    },
    "MongoReplica2Service": {
      "Type": "AWS::ECS::Service",
      "DependsOn": [
        "MongoReplica2ELB",
        "MongoReplica2Listener"
      ],
      "Properties": {
        "Role": {
          "Ref": "ECSServiceRole"
        },
        "TaskDefinition": {
          "Ref": "MongoReplica2Task"
        },
        "DesiredCount": 1,
        "LoadBalancers": [
          {
            "ContainerPort": 27017,
            "ContainerName": "MongoReplica2",
            "TargetGroupArn": {
              "Ref": "MongoReplica2ELBTarget"
            }
          }
        ],
        "Cluster": {
          "Ref": "ECSPrivateClusterMongoReplica2"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "0ef4610c-fd5e-4988-9fa0-33ebe9d379c1"
        }
      }
    },
    "MongoReplica2scalableTarget": {
      "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
      "Properties": {
        "MaxCapacity": 2,
        "MinCapacity": 1,
        "ResourceId": {
          "Fn::Join": [
            "",
            [
              "service/",
              {
                "Ref": "ECSPrivateClusterMongoReplica2"
              },
              "/",
              {
                "Fn::GetAtt": [
                  "MongoReplica2Service",
                  "Name"
                ]
              }
            ]
          ]
        },
        "RoleARN": {
          "Fn::GetAtt": [
            "ECSAutoscaleRole",
            "Arn"
          ]
        },
        "ScalableDimension": "ecs:service:DesiredCount",
        "ServiceNamespace": "ecs"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f491f70e-9e57-4b49-8a61-c30fd2ae266d"
        }
      }
    },
    "MongoReplica2ScaleUpPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "MongoReplica2ScaleUp",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "MongoReplica2scalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalLowerBound": 0,
              "ScalingAdjustment": 1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f9cd3d62-f162-4ea7-a9e6-c429c60cbf63"
        }
      }
    },
    "MongoReplica2ScaleDownPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "MongoReplica2ScaleDown",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "MongoReplica2scalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalUpperBound": 0,
              "ScalingAdjustment": -1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "c1705f78-2652-4a9c-a957-5b2c7e5e3b58"
        }
      }
    },
    "MongoReplica2CPUAlarmHigh": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU > 80% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPUHighThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "MongoReplica2ScaleUpPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterMongoReplica2"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "MongoReplica2Service",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "302970ad-bf34-4fe4-bd6f-2653734773bb"
        }
      }
    },
    "MongoReplica2CPUAlarmLow": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU < 60% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPULowThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "MongoReplica2ScaleDownPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterMongoReplica2"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "MongoReplica2Service",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "70262a95-da96-4014-8a92-d6df6d4c86e4"
        }
      }
    },
    "OhsTask": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "ContainerDefinitions": [
          {
            "Name": "data",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/",
                  {
                    "Ref": "ConfigEnv"
                  }
                ]
              ]
            },
            "Memory": 128,
            "Essential": "false"
          },
          {
            "Name": "Ohs",
            "Image": "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/ohs:latest",
            "Cpu": "2000",
            "PortMappings": [
              {
                "ContainerPort": "7777"
              }
            ],
            "Memory": "2000",
            "Essential": "true",
            "VolumesFrom": [
              {
                "SourceContainer": "data"
              }
            ]
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "07e55bdb-1898-4751-86cb-e50be4034d7d"
        }
      }
    },
    "OhsELB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Scheme": "internet-facing",
        "Subnets": {
          "Ref": "PublicSubnets"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPublic"
          }
        ],
        "LoadBalancerAttributes": [
          {
            "Key": "idle_timeout.timeout_seconds",
            "Value": "50"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "245e4e12-39e5-446a-a5b3-7ac96f0b042f"
        }
      }
    },
    "OhsELBTarget": {
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
      "Properties": {
        "HealthCheckIntervalSeconds": 300,
        "HealthCheckPath": "/",
        "HealthCheckProtocol": "HTTP",
        "HealthCheckTimeoutSeconds": 60,
        "HealthyThresholdCount": 5,
        "Matcher": {
          "HttpCode": "301"
        },
        "Port": 5000,
        "Protocol": "HTTP",
        "UnhealthyThresholdCount": 4,
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "d9f33846-c242-41cf-8b37-8b16b8093a89"
        }
      }
    },
    "OhsListener": {
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
      "Properties": {
        "DefaultActions": [
          {
            "Type": "forward",
            "TargetGroupArn": {
              "Ref": "OhsELBTarget"
            }
          }
        ],
        "LoadBalancerArn": {
          "Ref": "OhsELB"
        },
        "Port": "80",
        "Protocol": "HTTP"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "845caa9e-af9d-4ddb-b218-555693619731"
        }
      }
    },
    "OhsService": {
      "Type": "AWS::ECS::Service",
      "DependsOn": [
        "OhsELB",
        "OhsListener"
      ],
      "Properties": {
        "Role": {
          "Ref": "ECSServiceRole"
        },
        "TaskDefinition": {
          "Ref": "OhsTask"
        },
        "DesiredCount": 2,
        "LoadBalancers": [
          {
            "ContainerPort": 7777,
            "ContainerName": "Ohs",
            "TargetGroupArn": {
              "Ref": "OhsELBTarget"
            }
          }
        ],
        "Cluster": {
          "Ref": "ECSPublicCluster"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "0bae22b4-47d8-45a2-a526-290640d98b3f"
        }
      }
    },
    "OhsscalableTarget": {
      "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
      "Properties": {
        "MaxCapacity": 4,
        "MinCapacity": 2,
        "ResourceId": {
          "Fn::Join": [
            "",
            [
              "service/",
              {
                "Ref": "ECSPublicCluster"
              },
              "/",
              {
                "Fn::GetAtt": [
                  "OhsService",
                  "Name"
                ]
              }
            ]
          ]
        },
        "RoleARN": {
          "Fn::GetAtt": [
            "ECSAutoscaleRole",
            "Arn"
          ]
        },
        "ScalableDimension": "ecs:service:DesiredCount",
        "ServiceNamespace": "ecs"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "cf216e16-c4a0-42e2-86ee-39721b6b5553"
        }
      }
    },
    "OhsScaleUpPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "OhsScaleUp",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "OhsscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalLowerBound": 0,
              "ScalingAdjustment": 1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "458c8c4c-c0e6-437a-b767-af972afa81b5"
        }
      }
    },
    "OhsScaleDownPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "OhsScaleDown",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "OhsscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalUpperBound": 0,
              "ScalingAdjustment": -1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "05f851da-3eb2-4a24-9625-a9d1b52c179c"
        }
      }
    },
    "OhsCPUAlarmHigh": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU > 80% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPUHighThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "OhsScaleUpPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPublicCluster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "OhsService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "dd0ceb9d-5ff3-4f03-b409-9bc98e5aab1d"
        }
      }
    },
    "OhsCPUAlarmLow": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU < 60% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPULowThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "OhsScaleDownPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPublicCluster"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "OhsService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "0365f26c-cf4f-425a-84d0-3dae068cb81a"
        }
      }
    },
    "SolrGlobalNutchTask": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "Volumes": [
          {
            "Host": {
              "SourcePath": "/opt/data/"
            },
            "Name": "data"
          }
        ],
        "ContainerDefinitions": [
          {
            "Name": "data",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/",
                  {
                    "Ref": "ConfigEnv"
                  }
                ]
              ]
            },
            "Memory": 128,
            "Essential": "false"
          },
          {
            "Name": "SolrGlobalNutch",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/tbb_gs",
                  ":",
                  {
                    "Ref": "SolrGlobalNutchImageVersion"
                  }
                ]
              ]
            },
            "Cpu": {
              "Ref": "SolrCpu"
            },
            "PortMappings": [
              {
                "ContainerPort": {
                  "Ref": "SolrNutchPort"
                }
              }
            ],
            "Memory": {
              "Ref": "SolrNutchMemory"
            },
            "Essential": "true",
            "MountPoints": [
              {
                "SourceVolume": "data",
                "ContainerPath": "/opt/data"
              }
            ],
            "VolumesFrom": [
              {
                "SourceContainer": "data"
              }
            ]
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "c28d6830-bfee-41bf-b722-1836ecc21307"
        }
      }
    },
    "SolrGlobalNutchELB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Scheme": "internal",
        "Subnets": {
          "Ref": "PublicSubnets"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "LoadBalancerAttributes": [
          {
            "Key": "idle_timeout.timeout_seconds",
            "Value": "50"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "5e1a8abb-cced-4bdf-a248-2df1500f5d8b"
        }
      }
    },
    "SolrGlobalNutchELBTarget": {
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
      "Properties": {
        "HealthCheckIntervalSeconds": 300,
        "HealthCheckPath": "/solr/",
        "HealthCheckProtocol": "HTTP",
        "HealthCheckTimeoutSeconds": 60,
        "HealthyThresholdCount": 5,
        "Matcher": {
          "HttpCode": "200"
        },
        "Port": 5000,
        "Protocol": "HTTP",
        "UnhealthyThresholdCount": 4,
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "eafe6fed-a746-411c-99f5-b7fe4c677cdc"
        }
      }
    },
    "SolrGlobalNutchListener": {
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
      "Properties": {
        "DefaultActions": [
          {
            "Type": "forward",
            "TargetGroupArn": {
              "Ref": "SolrGlobalNutchELBTarget"
            }
          }
        ],
        "LoadBalancerArn": {
          "Ref": "SolrGlobalNutchELB"
        },
        "Port": "8983",
        "Protocol": "HTTP"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "110cb565-7e63-4eeb-8369-78e68a224ebe"
        }
      }
    },
    "SolrGlobalNutchService": {
      "Type": "AWS::ECS::Service",
      "DependsOn": [
        "SolrGlobalNutchELB",
        "SolrGlobalNutchListener"
      ],
      "Properties": {
        "Role": {
          "Ref": "ECSServiceRole"
        },
        "TaskDefinition": {
          "Ref": "SolrGlobalNutchTask"
        },
        "DesiredCount": 1,
        "LoadBalancers": [
          {
            "ContainerPort": {
              "Ref": "SolrNutchPort"
            },
            "ContainerName": "SolrGlobalNutch",
            "TargetGroupArn": {
              "Ref": "SolrGlobalNutchELBTarget"
            }
          }
        ],
        "Cluster": {
          "Ref": "ECSPrivateClusterSolrGlobalNutch"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "675cd568-f4f6-4660-ad27-e4ef02a4f424"
        }
      }
    },
    "SolrGlobalNutchscalableTarget": {
      "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
      "Properties": {
        "MaxCapacity": 2,
        "MinCapacity": 1,
        "ResourceId": {
          "Fn::Join": [
            "",
            [
              "service/",
              {
                "Ref": "ECSPrivateClusterSolrGlobalNutch"
              },
              "/",
              {
                "Fn::GetAtt": [
                  "SolrGlobalNutchService",
                  "Name"
                ]
              }
            ]
          ]
        },
        "RoleARN": {
          "Fn::GetAtt": [
            "ECSAutoscaleRole",
            "Arn"
          ]
        },
        "ScalableDimension": "ecs:service:DesiredCount",
        "ServiceNamespace": "ecs"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "0779d7c2-6122-47b4-bc1d-cdbb228a6eaa"
        }
      }
    },
    "SolrGlobalNutchScaleUpPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "SolrGlobalNutchScaleUp",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "SolrGlobalNutchscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalLowerBound": 0,
              "ScalingAdjustment": 1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "9666049c-9a87-4cfc-bf13-97d1e2c49d77"
        }
      }
    },
    "SolrGlobalNutchScaleDownPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "SolrGlobalNutchScaleDown",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "SolrGlobalNutchscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalUpperBound": 0,
              "ScalingAdjustment": -1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "a0212d97-665d-4aed-8825-02ea3c9dc58c"
        }
      }
    },
    "SolrGlobalNutchCPUAlarmHigh": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU > 80% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPUHighThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "SolrGlobalNutchScaleUpPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrGlobalNutch"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "SolrGlobalNutchService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "4b2e19be-735b-40d7-893a-c38ae246a069"
        }
      }
    },
    "SolrGlobalNutchCPUAlarmLow": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU < 60% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPULowThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "SolrGlobalNutchScaleDownPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrGlobalNutch"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "SolrGlobalNutchService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "be2ac6ac-3513-4685-9e3f-fb6eba4cf2a2"
        }
      }
    },
    "SolrBURNutchTask": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "Volumes": [
          {
            "Host": {
              "SourcePath": "/opt/data/"
            },
            "Name": "data"
          }
        ],
        "ContainerDefinitions": [
          {
            "Name": "data",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/",
                  {
                    "Ref": "ConfigEnv"
                  }
                ]
              ]
            },
            "Memory": 128,
            "Essential": "false"
          },
          {
            "Name": "SolrBURNutch",
            "Image": {
              "Fn::Join": [
                "",
                [
                  "904597257252.dkr.ecr.us-west-2.amazonaws.com/tbb/tbb_bur",
                  ":",
                  {
                    "Ref": "SolrBURNutchImageVersion"
                  }
                ]
              ]
            },
            "Cpu": {
              "Ref": "SolrCpu"
            },
            "PortMappings": [
              {
                "ContainerPort": {
                  "Ref": "SolrNutchPort"
                }
              }
            ],
            "Memory": {
              "Ref": "SolrNutchMemory"
            },
            "Essential": "true",
            "MountPoints": [
              {
                "SourceVolume": "data",
                "ContainerPath": "/opt/data"
              }
            ],
            "VolumesFrom": [
              {
                "SourceContainer": "data"
              }
            ]
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f7304559-f145-46f8-9ca7-2ceeb6a758ab"
        }
      }
    },
    "SolrBURNutchELB": {
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
      "Properties": {
        "Scheme": "internal",
        "Subnets": {
          "Ref": "PublicSubnets"
        },
        "SecurityGroups": [
          {
            "Ref": "SGPrivate"
          }
        ],
        "LoadBalancerAttributes": [
          {
            "Key": "idle_timeout.timeout_seconds",
            "Value": "50"
          }
        ]
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "cafab53c-11ee-455c-9b4c-0b759d38a515"
        }
      }
    },
    "SolrBURNutchELBTarget": {
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
      "Properties": {
        "HealthCheckIntervalSeconds": 300,
        "HealthCheckPath": "/solr/",
        "HealthCheckProtocol": "HTTP",
        "HealthCheckTimeoutSeconds": 60,
        "HealthyThresholdCount": 5,
        "Matcher": {
          "HttpCode": "200"
        },
        "Port": 5000,
        "Protocol": "HTTP",
        "UnhealthyThresholdCount": 4,
        "VpcId": {
          "Ref": "VPC"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "4f0a2c69-2cfc-47bd-973f-493f2cdc049a"
        }
      }
    },
    "SolrBURNutchListener": {
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
      "Properties": {
        "DefaultActions": [
          {
            "Type": "forward",
            "TargetGroupArn": {
              "Ref": "SolrBURNutchELBTarget"
            }
          }
        ],
        "LoadBalancerArn": {
          "Ref": "SolrBURNutchELB"
        },
        "Port": "8983",
        "Protocol": "HTTP"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "b3e3a23d-ab79-4395-a20b-0718f454ebdb"
        }
      }
    },
    "SolrBURNutchService": {
      "Type": "AWS::ECS::Service",
      "DependsOn": [
        "SolrBURNutchELB",
        "SolrBURNutchListener"
      ],
      "Properties": {
        "Role": {
          "Ref": "ECSServiceRole"
        },
        "TaskDefinition": {
          "Ref": "SolrBURNutchTask"
        },
        "DesiredCount": 1,
        "LoadBalancers": [
          {
            "ContainerPort": {
              "Ref": "SolrNutchPort"
            },
            "ContainerName": "SolrBURNutch",
            "TargetGroupArn": {
              "Ref": "SolrBURNutchELBTarget"
            }
          }
        ],
        "Cluster": {
          "Ref": "ECSPrivateClusterSolrBURNutch"
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "675cd568-f4f6-4660-ad27-e4ef02a4f424"
        }
      }
    },
    "SolrBURNutchscalableTarget": {
      "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
      "Properties": {
        "MaxCapacity": 2,
        "MinCapacity": 1,
        "ResourceId": {
          "Fn::Join": [
            "",
            [
              "service/",
              {
                "Ref": "ECSPrivateClusterSolrBURNutch"
              },
              "/",
              {
                "Fn::GetAtt": [
                  "SolrBURNutchService",
                  "Name"
                ]
              }
            ]
          ]
        },
        "RoleARN": {
          "Fn::GetAtt": [
            "ECSAutoscaleRole",
            "Arn"
          ]
        },
        "ScalableDimension": "ecs:service:DesiredCount",
        "ServiceNamespace": "ecs"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "cbaf6177-2693-43d5-8e2b-433f4045b3e3"
        }
      }
    },
    "SolrBURNutchScaleUpPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "SolrBURNutchScaleUp",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "SolrBURNutchscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalLowerBound": 0,
              "ScalingAdjustment": 1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "f159b181-fe28-4494-9d9b-64d8af782826"
        }
      }
    },
    "SolrBURNutchScaleDownPolicy": {
      "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
      "Properties": {
        "PolicyName": "SolrBURNutchScaleDown",
        "PolicyType": "StepScaling",
        "ScalingTargetId": {
          "Ref": "SolrBURNutchscalableTarget"
        },
        "StepScalingPolicyConfiguration": {
          "AdjustmentType": "ChangeInCapacity",
          "Cooldown": 60,
          "MetricAggregationType": "Average",
          "StepAdjustments": [
            {
              "MetricIntervalUpperBound": 0,
              "ScalingAdjustment": -1
            }
          ]
        }
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "b96af188-986d-485a-ad98-f5ca1cf3f90b"
        }
      }
    },
    "SolrBURNutchCPUAlarmHigh": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-up if CPU > 80% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPUHighThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "SolrBURNutchScaleUpPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrBURNutch"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "SolrBURNutchService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "GreaterThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "d4def3cb-9fe8-4c02-959e-7fa8c82f4f96"
        }
      }
    },
    "SolrBURNutchCPUAlarmLow": {
      "Type": "AWS::CloudWatch::Alarm",
      "Properties": {
        "AlarmDescription": "Scale-down if CPU < 60% for 5 minutes",
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/ECS",
        "Statistic": "Average",
        "Period": "300",
        "EvaluationPeriods": "2",
        "Threshold": {
          "Ref": "ApplicationCPULowThreshold"
        },
        "AlarmActions": [
          {
            "Ref": "SolrBURNutchScaleDownPolicy"
          }
        ],
        "Dimensions": [
          {
            "Name": "ClusterName",
            "Value": {
              "Ref": "ECSPrivateClusterSolrBURNutch"
            }
          },
          {
            "Name": "ServiceName",
            "Value": {
              "Fn::GetAtt": [
                "SolrBURNutchService",
                "Name"
              ]
            }
          }
        ],
        "ComparisonOperator": "LessThanThreshold"
      },
      "Metadata": {
        "AWS::CloudFormation::Designer": {
          "id": "eba570c8-a767-4ff5-91ed-154fd10899e2"
        }
      }
    }
  },
  "Outputs": {
    "OhsLoadBalancerDNSName": {
      "Description": "The DNSName of the Ohs load balancer",
      "Value": {
        "Fn::GetAtt": [
          "OhsELB",
          "DNSName"
        ]
      }
    },
    "BodybeastLoadBalancerDNSName": {
      "Description": "The DNSName of the Bodybeast load balancer",
      "Value": {
        "Fn::GetAtt": [
          "BodybeastELB",
          "DNSName"
        ]
      }
    },
    "CertificationLoadBalancerDNSName": {
      "Description": "The DNSName of the Certification load balancer",
      "Value": {
        "Fn::GetAtt": [
          "CertificationELB",
          "DNSName"
        ]
      }
    },
    "LiferayLoadBalancerDNSName": {
      "Description": "The DNSName of the Liferay load balancer",
      "Value": {
        "Fn::GetAtt": [
          "LiferayELB",
          "DNSName"
        ]
      }
    },
    "AutoprocLoadBalancerDNSName": {
      "Description": "The DNSName of the Autoproc load balancer",
      "Value": {
        "Fn::GetAtt": [
          "AutoprocELB",
          "DNSName"
        ]
      }
    },
    "GeneralELB": {
      "Description": "The DNSName of the General load balancer",
      "Value": {
        "Fn::GetAtt": [
          "GeneralELB",
          "DNSName"
        ]
      }
    },
    "SolrMasterELB": {
      "Description": "The DNSName of the SolrMaster load balancer",
      "Value": {
        "Fn::GetAtt": [
          "SolrMasterELB",
          "DNSName"
        ]
      }
    },
    "SolrSlaveELB": {
      "Description": "The DNSName of the SolrSlave load balancer",
      "Value": {
        "Fn::GetAtt": [
          "SolrSlaveELB",
          "DNSName"
        ]
      }
    },
    "MongoReplica1ELB": {
      "Description": "The DNSName of the MongoReplica1 load balancer",
      "Value": {
        "Fn::GetAtt": [
          "MongoReplica1ELB",
          "DNSName"
        ]
      }
    },
    "MongoReplica2ELB": {
      "Description": "The DNSName of the MongoReplica2 load balancer",
      "Value": {
        "Fn::GetAtt": [
          "MongoReplica2ELB",
          "DNSName"
        ]
      }
    },
    "SolrGlobalNutchELB": {
      "Description": "The DNSName of the SolrGlobalNutch load balancer",
      "Value": {
        "Fn::GetAtt": [
          "SolrGlobalNutchELB",
          "DNSName"
        ]
      }
    },
    "SolrBURlNutchELB": {
      "Description": "The DNSName of the SolrBURNutch load balancer",
      "Value": {
        "Fn::GetAtt": [
          "SolrBURNutchELB",
          "DNSName"
        ]
      }
    }
  }
}
